<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content=" OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³ å“ˆå¸Œè®¡ç®— ç¼–è§£ç  éªŒè¯ç½‘ç«™è¯ä¹¦é“¾ éšæœºæ•° RSA RSA å…¬ç§é’¥ç”Ÿæˆ RSA ç§é’¥åŠ å¯†ç­¾å, å…¬é’¥éªŒç­¾ RSA å…¬é’¥åŠ å¯†, ç§é’¥è§£å¯† X.509 è¯ä¹¦ç›¸å…³æ“ä½œ DER å’Œ PEM æ ¼å¼è½¬æ¢ å‡ ç§æå–å…¬é’¥çš„æ–¹æ³• ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯” å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥ æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é… CA ç­¾å‘è¯ä¹¦ CAç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹ ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º CSR å’Œ X509 è¯ä¹¦ é…ç½®æ–‡ä»¶åˆ›å»º CSR é…ç½®æ–‡ä»¶åˆ›å»º X509 è¯ä¹¦ X509v3 æ‰©å±•å‚æ•° PKCS è¯ä¹¦æ ¼å¼è½¬æ¢ PKCS#1, PKCS#8, PKCS#10, x509 è¯ä¹¦ç›¸å…³ PKCS#1 å’Œ PKCS#8 äº’è½¬ PKCS#7 è¯ä¹¦é“¾ç›¸å…³ PKCS#12 ç›¸å…³ ECC ECC è½¬æ¢æ ¼å¼ ECDSA ç­¾åä¸éªŒç­¾ ECDH éå¯¹ç§°åŠ å¯† ç”Ÿæˆè‡ªç­¾å ECC è¯ä¹¦ AES Reference OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³ "><title>OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³</title><link rel=canonical href=https://capriwits.com/post/openssl-and-x509-certificate-related/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³"><meta property='og:description' content=" OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³ å“ˆå¸Œè®¡ç®— ç¼–è§£ç  éªŒè¯ç½‘ç«™è¯ä¹¦é“¾ éšæœºæ•° RSA RSA å…¬ç§é’¥ç”Ÿæˆ RSA ç§é’¥åŠ å¯†ç­¾å, å…¬é’¥éªŒç­¾ RSA å…¬é’¥åŠ å¯†, ç§é’¥è§£å¯† X.509 è¯ä¹¦ç›¸å…³æ“ä½œ DER å’Œ PEM æ ¼å¼è½¬æ¢ å‡ ç§æå–å…¬é’¥çš„æ–¹æ³• ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯” å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥ æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é… CA ç­¾å‘è¯ä¹¦ CAç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹ ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º CSR å’Œ X509 è¯ä¹¦ é…ç½®æ–‡ä»¶åˆ›å»º CSR é…ç½®æ–‡ä»¶åˆ›å»º X509 è¯ä¹¦ X509v3 æ‰©å±•å‚æ•° PKCS è¯ä¹¦æ ¼å¼è½¬æ¢ PKCS#1, PKCS#8, PKCS#10, x509 è¯ä¹¦ç›¸å…³ PKCS#1 å’Œ PKCS#8 äº’è½¬ PKCS#7 è¯ä¹¦é“¾ç›¸å…³ PKCS#12 ç›¸å…³ ECC ECC è½¬æ¢æ ¼å¼ ECDSA ç­¾åä¸éªŒç­¾ ECDH éå¯¹ç§°åŠ å¯† ç”Ÿæˆè‡ªç­¾å ECC è¯ä¹¦ AES Reference OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³ "><meta property='og:url' content='https://capriwits.com/post/openssl-and-x509-certificate-related/'><meta property='og:site_name' content="Capriwits's site"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='OpenSSL'><meta property='article:tag' content='Cryptography'><meta property='article:published_time' content='2025-01-26T20:43:16+08:00'><meta property='article:modified_time' content='2025-01-26T20:43:16+08:00'><meta property='og:image' content='https://capriwits.com/post/openssl-and-x509-certificate-related/openssl-icon.png'><meta name=twitter:title content="OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³"><meta name=twitter:description content=" OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³ å“ˆå¸Œè®¡ç®— ç¼–è§£ç  éªŒè¯ç½‘ç«™è¯ä¹¦é“¾ éšæœºæ•° RSA RSA å…¬ç§é’¥ç”Ÿæˆ RSA ç§é’¥åŠ å¯†ç­¾å, å…¬é’¥éªŒç­¾ RSA å…¬é’¥åŠ å¯†, ç§é’¥è§£å¯† X.509 è¯ä¹¦ç›¸å…³æ“ä½œ DER å’Œ PEM æ ¼å¼è½¬æ¢ å‡ ç§æå–å…¬é’¥çš„æ–¹æ³• ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯” å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥ æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é… CA ç­¾å‘è¯ä¹¦ CAç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹ ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º CSR å’Œ X509 è¯ä¹¦ é…ç½®æ–‡ä»¶åˆ›å»º CSR é…ç½®æ–‡ä»¶åˆ›å»º X509 è¯ä¹¦ X509v3 æ‰©å±•å‚æ•° PKCS è¯ä¹¦æ ¼å¼è½¬æ¢ PKCS#1, PKCS#8, PKCS#10, x509 è¯ä¹¦ç›¸å…³ PKCS#1 å’Œ PKCS#8 äº’è½¬ PKCS#7 è¯ä¹¦é“¾ç›¸å…³ PKCS#12 ç›¸å…³ ECC ECC è½¬æ¢æ ¼å¼ ECDSA ç­¾åä¸éªŒç­¾ ECDH éå¯¹ç§°åŠ å¯† ç”Ÿæˆè‡ªç­¾å ECC è¯ä¹¦ AES Reference OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://capriwits.com/post/openssl-and-x509-certificate-related/openssl-icon.png'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_b10ebf651e1d59c2.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŒ¹</span></figure><div class=site-meta><h1 class=site-name><a href=/>Capriwits's site</a></h1><h2 class=site-description>To see the world as it is and to love it.</h2></div></header><ol class=menu-social><li><a href=https://github.com/CapriWits target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto://hypocrite30@foxmail.com target=_blank title=Mail rel=me><!doctype html><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="212.795" height="220.59" viewBox="0 0 212.795 220.59" enable-background="new 0 0 212.795 220.59"><path fill="#F7B63E" d="M206.382 36.693v138.896c0 2.718-2.207 4.924-4.926 4.924H11.338c-2.719.0-4.925-2.206-4.925-4.924V36.693l73.042 69.448 26.943 25.612 26.941-25.612 73.043-69.448z"/><path fill="#10003B" d="M201.456 182.514H11.338c-3.819.0-6.925-3.106-6.925-6.925V36.694c0-.8.477-1.523 1.211-1.838.736-.315 1.588-.163 2.167.389l98.606 93.749 98.606-93.749c.579-.552 1.432-.704 2.167-.389.734.315 1.211 1.038 1.211 1.838v138.895C208.382 179.408 205.275 182.514 201.456 182.514M8.413 41.354v134.234c0 1.613 1.312 2.925 2.925 2.925h190.118c1.613.0 2.926-1.312 2.926-2.925V41.354l-96.606 91.848c-.771.734-1.984.734-2.756.0L8.413 41.354z"/><path fill="#FFD161" d="M206.382 36.693l-73.043 69.448-26.941 25.612-26.943-25.612L6.413 36.693c0-2.719 2.206-4.925 4.925-4.925h190.118C204.175 31.769 206.382 33.975 206.382 36.693"/><path fill="#10003B" d="M106.398 133.753c-.496.0-.993-.184-1.378-.551L5.035 38.143c-.397-.377-.622-.901-.622-1.449.0-3.818 3.107-6.925 6.925-6.925h190.118c3.82.0 6.926 3.107 6.926 6.925.0.548-.225 1.072-.622 1.449l-99.984 95.06C107.39 133.569 106.894 133.753 106.398 133.753M8.514 35.931l97.884 93.063 97.883-93.063c-.337-1.244-1.476-2.162-2.825-2.162H11.338C9.988 33.769 8.85 34.687 8.514 35.931M206.382 36.693h.01H206.382z"/><path fill="#F7B63E" d="M206.382 175.589c0 2.719-2.207 4.925-4.926 4.925H11.338c-2.719.0-4.925-2.206-4.925-4.925l73.042-69.447 26.943 25.611 26.941-25.611 73.043 69.447z"/><path fill="#10003B" d="M201.456 182.514H11.338c-3.818.0-6.925-3.106-6.925-6.925.0-.548.225-1.072.622-1.449l73.042-69.447c.772-.735 1.985-.735 2.756.0l25.565 24.301 25.563-24.301c.771-.735 1.984-.735 2.756.0l73.043 69.447c.398.377.622.901.622 1.449C208.382 179.408 205.275 182.514 201.456 182.514M8.514 176.352c.336 1.244 1.475 2.162 2.824 2.162h190.118c1.35.0 2.489-.918 2.826-2.162l-70.943-67.45-25.563 24.301c-.772.734-1.985.734-2.756.0l-25.565-24.301-70.941 67.45z"/><polygon fill="#FFD161" points="79.456,106.141 6.416,175.593 6.416,36.69"/><path fill="#10003B" d="M6.416 177.593c-.267.0-.534-.053-.788-.162-.735-.315-1.212-1.038-1.212-1.838V36.69c0-.8.477-1.523 1.211-1.838.736-.315 1.588-.162 2.167.389l73.04 69.451c.397.377.622.901.622 1.449s-.225 1.072-.622 1.449l-73.04 69.452C7.415 177.403 6.919 177.593 6.416 177.593m2-136.242v129.581l68.138-64.791L8.416 41.351z"/><path fill="#10003B" d="M152.941 47.313h-62.06c-1.104.0-2-.896-2-2s.896-2 2-2h62.06c1.104.0 2 .896 2 2 0 1.105-.89500000000001 2-2 2"/><path fill="#10003B" d="M80.293 47.313h-20.44c-1.105.0-2-.896-2-2s.895-2 2-2h20.44c1.104.0 2 .896 2 2 0 1.105-.896000000000001 2-2 2"/><path fill="#10003B" d="M19.219 129.813c-1.104.0-2-.896-2-2V91.12c0-1.105.896-2 2-2s2 .895 2 2v36.693C21.219 128.917 20.323 129.813 19.219 129.813"/></svg></a></li><li><a href=https://twitter.com/noctambulist30 target=_blank title=Twitter rel=me><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512"><style>.st0{fill:#0cf}.st1{fill-rule:evenodd;clip-rule:evenodd;fill:#fff}</style><g><g><g><path class="st0" d="M503.6277 98.9293c-15.8539 7.1724-33.3008 11.5266-50.4099 14.3986 8.1227-1.3628 20.0931-16.0676 24.8777-22.0133 7.3009-9.0701 13.3735-19.4058 16.7879-30.5663.4348-.8711.7665-1.9664-.1046-2.6269-1.0953-.4348-1.8006-.2122-2.6717.2241-19.0965 10.2326-38.8504 17.6575-59.8715 22.9113-1.7423.4363-3.0348.0-4.1301-1.0938-1.7408-1.9679-3.3785-3.8208-5.2328-5.3524-8.8355-7.5176-18.3165-13.4154-29.0048-17.7711-14.0355-5.7215-29.3694-8.1451-44.4853-7.1649-14.7064.9548-29.1497 5.1014-42.2035 11.9211-13.0806 6.8347-24.7522 16.3411-34.0464 27.8109-9.614 11.8628-16.7042 25.8744-20.3337 40.7227-3.504 14.3313-3.2171 28.5087-1.0788 42.997.3242 2.4013.1136 2.7255-2.0636 2.4013C167.4175 163.4898 99.2485 134.0606 43.912 71.0033c-2.4027-2.7375-3.7072-2.7375-5.6752.2107-24.2158 36.2953-12.4665 94.6127 17.7845 123.2694 4.0315 3.8208 8.1765 7.6416 12.6443 11.1262-1.6302.3347-21.7622-1.8454-39.7007-11.1262-2.4027-1.5182-3.6086-.647-3.8208 2.0785-.2226 3.9209.1121 7.5295.65 11.7851 4.6471 36.7928 30.1285 70.8273 65.0222 84.1052 4.145 1.7423 8.7249 3.2724 13.1942 4.0315-7.9524 1.7423-16.1409 2.99-38.9416 1.2058-2.8376-.5454-3.9209.8727-2.8376 3.5981 17.1345 46.6997 54.1186 60.5932 81.816 68.5098 3.7072.6485 7.4174.6485 11.1351 1.5197-.2227.3347-.4453.3347-.6575.6589-9.1881 14.0056-41.041 24.4295-55.8729 29.613-26.9756 9.4272-56.3481 13.6694-84.8568 10.8587-4.5634-.6694-5.5212-.6201-6.7585.0-1.2522.774-.1584 1.8633 1.306 3.0497 5.7872 3.8193 11.6746 7.2053 17.674 10.4792 18.1073 9.5946 36.9841 17.2346 56.7231 22.6872 101.939 28.1516 216.7675 7.4653 293.3088-68.583 60.1076-59.7206 81.1735-142.0775 81.1735-224.539.0-3.2276 3.8133-5.0102 6.0801-6.7122 15.6388-11.7508 28.068-25.8116 39.7336-41.5132 2.6209-3.5279 2.4595-6.6643 2.4595-7.9524.0-.2226.0-.4348.0-.4348C505.4955 97.6114 505.6569 98.0074 503.6277 98.9293z"/></g><g><path class="st1" d="M154.6851 458.9174c42.2722.0 2.0291.0.0.0 5.56299999999999.0-.224199999999996.0.0.0z"/></g><g><path class="st1" d="M154.6851 458.9174c-.656000000000006.0508000000000379-8.2363.0.0.0.0.0-1.31950000000001.0.0.0z"/></g><g><path class="st1" d="M171.4849 459.3537c0-.841200000000015 8.84139999999999.0.0.0.0-.436300000000017 1.0848.0.0.0z"/></g><g><path class="st1" d="M347.9839 50.2692c-.5484.4348-1.3075.4348-2.0651.0C346.6764 50.2692 347.4355 50.2692 347.9839 50.2692z"/></g></g></g></svg></a></li><li><a href=https://t.me/capriwits target=_blank title=Telegram rel=me><svg width="256" height="256" viewBox="0 0 256 256" preserveAspectRatio="xMidYMid"><title>Telegram</title><defs><linearGradient x1="50%" y1="277555756e-23%" x2="50%" y2="100%" id="telegramLinearGradient-1"><stop stop-color="#2AABEE" offset="0"/><stop stop-color="#229ED9" offset="100%"/></linearGradient></defs><g><path d="M128 0C94.06.0 61.48 13.494 37.5 37.49 13.5 61.486.0 94.066.0 128s13.5 66.514 37.5 90.51C61.48 242.506 94.06 256 128 256s66.52-13.494 90.5-37.49c24-23.996 37.5-56.576 37.5-90.51s-13.5-66.514-37.5-90.51C194.52 13.494 161.94.0 128 0z" fill="url(#telegramLinearGradient-1)"/><path d="M57.94 126.6476c37.32-16.256 62.2-26.974 74.64-32.152 35.56-14.786 42.94-17.354 47.76-17.4408458C181.4 77.0376 183.76 77.2996 185.3 78.5456 186.58 79.5956 186.94 81.0156 187.12 82.0116 187.28 83.0076 187.5 85.2776 187.32 87.0496 185.4 107.2896 177.06 156.4056 172.82 179.0756 171.04 188.668 167.5 191.884 164.08 192.198 156.64 192.882 151 187.286 143.8 182.5676c-11.26-7.386-17.62-11.982-28.56-19.188C102.6 155.0516 110.8 150.4736 118 142.9936c1.88-1.958 34.64-31.748 35.26-34.45C153.34 108.2056 153.42 106.9456 152.66 106.2816 151.92 105.6156 150.82 105.8436 150.02 106.0236c-1.14000000000001.256-19.12 12.152-54 35.686C90.92 145.2176 86.3 146.9276 82.14 146.8376 77.58 146.7396 68.78 144.2536 62.24 142.1296 54.24 139.5236 47.86 138.1456 48.42 133.7196 48.7 131.4156 51.88 129.0576 57.94 126.6476z" fill="#FFF"/></g></svg></a></li><li><a href=/index.xml target=_blank title=RSS rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/link/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#rsa-å…¬ç§é’¥ç”Ÿæˆ>RSA å…¬ç§é’¥ç”Ÿæˆ</a></li><li><a href=#rsa-ç§é’¥åŠ å¯†ç­¾å-å…¬é’¥éªŒç­¾>RSA ç§é’¥åŠ å¯†ç­¾å, å…¬é’¥éªŒç­¾</a></li><li><a href=#rsa-å…¬é’¥åŠ å¯†-ç§é’¥è§£å¯†>RSA å…¬é’¥åŠ å¯†, ç§é’¥è§£å¯†</a></li></ol><ol><li><a href=#der-å’Œ-pem-æ ¼å¼è½¬æ¢>DER å’Œ PEM æ ¼å¼è½¬æ¢</a></li><li><a href=#å‡ ç§æå–å…¬é’¥çš„æ–¹æ³•>å‡ ç§æå–å…¬é’¥çš„æ–¹æ³•</a></li><li><a href=#ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦>ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</a><ol><li><a href=#è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯”>è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯”</a></li><li><a href=#å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥>å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥</a></li></ol></li><li><a href=#æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é…>æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é…</a></li><li><a href=#ca-ç­¾å‘è¯ä¹¦>CA ç­¾å‘è¯ä¹¦</a><ol><li><a href=#caç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹>CAç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹</a></li></ol></li><li><a href=#ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º-csr-å’Œ-x509-è¯ä¹¦>ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º CSR å’Œ X509 è¯ä¹¦</a><ol><li><a href=#é…ç½®æ–‡ä»¶åˆ›å»º-csr>é…ç½®æ–‡ä»¶åˆ›å»º CSR</a></li><li><a href=#é…ç½®æ–‡ä»¶åˆ›å»º-x509-è¯ä¹¦>é…ç½®æ–‡ä»¶åˆ›å»º X509 è¯ä¹¦</a></li></ol></li><li><a href=#x509v3-æ‰©å±•å‚æ•°>X509v3 æ‰©å±•å‚æ•°</a></li><li><a href=#pkcs-è¯ä¹¦æ ¼å¼è½¬æ¢>PKCS è¯ä¹¦æ ¼å¼è½¬æ¢</a><ol><li><a href=#pkcs1-pkcs8-pkcs10-x509-è¯ä¹¦ç›¸å…³>PKCS#1, PKCS#8, PKCS#10, x509 è¯ä¹¦ç›¸å…³</a></li><li><a href=#pkcs1-å’Œ-pkcs8-äº’è½¬>PKCS#1 å’Œ PKCS#8 äº’è½¬</a></li><li><a href=#pkcs7-è¯ä¹¦é“¾ç›¸å…³>PKCS#7 è¯ä¹¦é“¾ç›¸å…³</a></li><li><a href=#pkcs12-ç›¸å…³>PKCS#12 ç›¸å…³</a></li></ol></li></ol><ol><li><a href=#ecc-è½¬æ¢æ ¼å¼>ECC è½¬æ¢æ ¼å¼</a></li><li><a href=#ecdsa-ç­¾åä¸éªŒç­¾>ECDSA ç­¾åä¸éªŒç­¾</a></li><li><a href=#ecdh-éå¯¹ç§°åŠ å¯†>ECDH éå¯¹ç§°åŠ å¯†</a></li><li><a href=#ç”Ÿæˆè‡ªç­¾å-ecc-è¯ä¹¦>ç”Ÿæˆè‡ªç­¾å ECC è¯ä¹¦</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/openssl-and-x509-certificate-related/><img src=/post/openssl-and-x509-certificate-related/openssl-icon_hu_b7acd38e4ab7b195.png srcset="/post/openssl-and-x509-certificate-related/openssl-icon_hu_b7acd38e4ab7b195.png 800w, /post/openssl-and-x509-certificate-related/openssl-icon_hu_8d8c0c60446967d9.png 1600w" width=800 height=325 loading=lazy alt="Featured image of post OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³"></a></div><div class=article-details><header class=article-category><a href=/categories/backend/>Backend</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/openssl-and-x509-certificate-related/>OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jan 26, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 18 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><ul><li><a class=link href=#openssl-%e5%8f%8a-x509-%e8%af%81%e4%b9%a6%e7%9b%b8%e5%85%b3>OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³</a></li><li><a class=link href=#%e5%93%88%e5%b8%8c%e8%ae%a1%e7%ae%97>å“ˆå¸Œè®¡ç®—</a></li><li><a class=link href=#%e7%bc%96%e8%a7%a3%e7%a0%81>ç¼–è§£ç </a></li><li><a class=link href=#%e9%aa%8c%e8%af%81%e7%bd%91%e7%ab%99%e8%af%81%e4%b9%a6%e9%93%be>éªŒè¯ç½‘ç«™è¯ä¹¦é“¾</a></li><li><a class=link href=#%e9%9a%8f%e6%9c%ba%e6%95%b0>éšæœºæ•°</a></li><li><a class=link href=#rsa>RSA</a><ul><li><a class=link href=#rsa-%e5%85%ac%e7%a7%81%e9%92%a5%e7%94%9f%e6%88%90>RSA å…¬ç§é’¥ç”Ÿæˆ</a></li><li><a class=link href=#rsa-%e7%a7%81%e9%92%a5%e5%8a%a0%e5%af%86%e7%ad%be%e5%90%8d-%e5%85%ac%e9%92%a5%e9%aa%8c%e7%ad%be>RSA ç§é’¥åŠ å¯†ç­¾å, å…¬é’¥éªŒç­¾</a></li><li><a class=link href=#rsa-%e5%85%ac%e9%92%a5%e5%8a%a0%e5%af%86-%e7%a7%81%e9%92%a5%e8%a7%a3%e5%af%86>RSA å…¬é’¥åŠ å¯†, ç§é’¥è§£å¯†</a></li></ul></li><li><a class=link href=#x509-%e8%af%81%e4%b9%a6%e7%9b%b8%e5%85%b3%e6%93%8d%e4%bd%9c>X.509 è¯ä¹¦ç›¸å…³æ“ä½œ</a><ul><li><a class=link href=#der-%e5%92%8c-pem-%e6%a0%bc%e5%bc%8f%e8%bd%ac%e6%8d%a2>DER å’Œ PEM æ ¼å¼è½¬æ¢</a></li><li><a class=link href=#%e5%87%a0%e7%a7%8d%e6%8f%90%e5%8f%96%e5%85%ac%e9%92%a5%e7%9a%84%e6%96%b9%e6%b3%95>å‡ ç§æå–å…¬é’¥çš„æ–¹æ³•</a></li><li><a class=link href=#%e7%a7%81%e9%92%a5%e7%94%9f%e6%88%90%e8%87%aa%e7%ad%be%e5%90%8d%e8%af%81%e4%b9%a6>ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</a><ul><li><a class=link href=#%e8%87%aa%e7%ad%be%e5%90%8d%e8%af%81%e4%b9%a6%e7%9a%84%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f%e5%af%b9%e6%af%94>è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯”</a></li><li><a class=link href=#%e5%bf%ab%e9%80%9f%e7%94%9f%e6%88%90%e8%af%81%e4%b9%a6%e5%92%8c%e5%af%86%e9%92%a5>å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥</a></li></ul></li><li><a class=link href=#%e6%a0%a1%e9%aa%8c%e7%a7%81%e9%92%a5%e4%b8%8e%e8%af%81%e4%b9%a6%e6%98%af%e5%90%a6%e5%8c%b9%e9%85%8d>æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é…</a></li><li><a class=link href=#ca-%e7%ad%be%e5%8f%91%e8%af%81%e4%b9%a6>CA ç­¾å‘è¯ä¹¦</a><ul><li><a class=link href=#ca%e7%ad%be%e5%8f%91%e8%af%81%e4%b9%a6%e4%b8%8e%e8%87%aa%e7%ad%be%e5%90%8d%e8%af%81%e4%b9%a6%e4%b8%8d%e5%90%8c%e7%82%b9>CAç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹</a></li></ul></li><li><a class=link href=#%e4%bd%bf%e7%94%a8%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%88%9b%e5%bb%ba-csr-%e5%92%8c-x509-%e8%af%81%e4%b9%a6>ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º CSR å’Œ X509 è¯ä¹¦</a><ul><li><a class=link href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%88%9b%e5%bb%ba-csr>é…ç½®æ–‡ä»¶åˆ›å»º CSR</a></li><li><a class=link href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%88%9b%e5%bb%ba-x509-%e8%af%81%e4%b9%a6>é…ç½®æ–‡ä»¶åˆ›å»º X509 è¯ä¹¦</a></li></ul></li><li><a class=link href=#x509v3-%e6%89%a9%e5%b1%95%e5%8f%82%e6%95%b0>X509v3 æ‰©å±•å‚æ•°</a></li><li><a class=link href=#pkcs-%e8%af%81%e4%b9%a6%e6%a0%bc%e5%bc%8f%e8%bd%ac%e6%8d%a2>PKCS è¯ä¹¦æ ¼å¼è½¬æ¢</a><ul><li><a class=link href=#pkcs1-pkcs8-pkcs10-x509-%e8%af%81%e4%b9%a6%e7%9b%b8%e5%85%b3>PKCS#1, PKCS#8, PKCS#10, x509 è¯ä¹¦ç›¸å…³</a></li><li><a class=link href=#pkcs1-%e5%92%8c-pkcs8-%e4%ba%92%e8%bd%ac>PKCS#1 å’Œ PKCS#8 äº’è½¬</a></li><li><a class=link href=#pkcs7-%e8%af%81%e4%b9%a6%e9%93%be%e7%9b%b8%e5%85%b3>PKCS#7 è¯ä¹¦é“¾ç›¸å…³</a></li><li><a class=link href=#pkcs12-%e7%9b%b8%e5%85%b3>PKCS#12 ç›¸å…³</a></li></ul></li></ul></li><li><a class=link href=#ecc>ECC</a><ul><li><a class=link href=#ecc-%e8%bd%ac%e6%8d%a2%e6%a0%bc%e5%bc%8f>ECC è½¬æ¢æ ¼å¼</a></li><li><a class=link href=#ecdsa-%e7%ad%be%e5%90%8d%e4%b8%8e%e9%aa%8c%e7%ad%be>ECDSA ç­¾åä¸éªŒç­¾</a></li><li><a class=link href=#ecdh-%e9%9d%9e%e5%af%b9%e7%a7%b0%e5%8a%a0%e5%af%86>ECDH éå¯¹ç§°åŠ å¯†</a></li><li><a class=link href=#%e7%94%9f%e6%88%90%e8%87%aa%e7%ad%be%e5%90%8d-ecc-%e8%af%81%e4%b9%a6>ç”Ÿæˆè‡ªç­¾å ECC è¯ä¹¦</a></li></ul></li><li><a class=link href=#aes>AES</a></li><li><a class=link href=#reference>Reference</a></li></ul><h1 id=openssl-åŠ-x509-è¯ä¹¦ç›¸å…³>OpenSSL åŠ X509 è¯ä¹¦ç›¸å…³</h1><p><img src=https://img.shields.io/badge/OpenSSL-1.0.2k--fips_2017-blue loading=lazy alt=OpenSSL-1.0.2k>
<img src=https://img.shields.io/badge/OpenSSL-3.4.0--2024-green loading=lazy alt=OpenSSL-3.4.0></p><h1 id=å“ˆå¸Œè®¡ç®—>å“ˆå¸Œè®¡ç®—</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># è®¡ç®— SHA256 å“ˆå¸Œå€¼</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 plaintext.txt
</span></span><span class=line><span class=cl>openssl sha256 plaintext.txt
</span></span><span class=line><span class=cl><span class=c1># ç­‰ä»·äºï¼šsha256sum plaintext.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è®¡ç®— MD5 å“ˆå¸Œå€¼</span>
</span></span><span class=line><span class=cl>openssl dgst -md5 plaintext.txt
</span></span><span class=line><span class=cl><span class=c1># ç­‰ä»·äºï¼šmd5sum plaintext.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># HMAC</span>
</span></span><span class=line><span class=cl><span class=c1># ä¸æŒ‡å®šï¼Œé»˜è®¤ä¸º HMAC-SHA256</span>
</span></span><span class=line><span class=cl>openssl dgst -hmac <span class=s2>&#34;key&#34;</span> plaintext.txt 
</span></span><span class=line><span class=cl><span class=c1># HMAC-MD5</span>
</span></span><span class=line><span class=cl>openssl dgst -hmac <span class=s2>&#34;key&#34;</span> -md5 plaintext.txt
</span></span><span class=line><span class=cl><span class=c1># HMAC-SHA1</span>
</span></span><span class=line><span class=cl>openssl dgst -hmac <span class=s2>&#34;key&#34;</span> -sha1 plaintext.txt
</span></span><span class=line><span class=cl><span class=c1># HMAC-SHA256</span>
</span></span><span class=line><span class=cl>openssl dgst -hmac <span class=s2>&#34;key&#34;</span> -sha256 plaintext.txt
</span></span></code></pre></td></tr></table></div></div><h1 id=ç¼–è§£ç >ç¼–è§£ç </h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç¼–ç </span>
</span></span><span class=line><span class=cl>openssl base64 -in plaintext.txt -out encoded.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è§£ç </span>
</span></span><span class=line><span class=cl>openssl base64 -d -in encoded.txt -out decoded.txt
</span></span></code></pre></td></tr></table></div></div><h1 id=éªŒè¯ç½‘ç«™è¯ä¹¦é“¾>éªŒè¯ç½‘ç«™è¯ä¹¦é“¾</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># è·å–ç½‘ç«™çš„å®Œæ•´è¯ä¹¦é“¾ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>openssl s_client -showcerts -connect example.com:443
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¿å­˜å®Œæ•´è¯ä¹¦é“¾</span>
</span></span><span class=line><span class=cl><span class=c1># &lt;/dev/nullï¼šç¡®ä¿è¾“å…¥ä¸ºç©ºã€‚</span>
</span></span><span class=line><span class=cl><span class=c1># 2&gt;/dev/nullï¼šå°†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°ç©ºè®¾å¤‡ï¼Œä»¥é¿å…æ˜¾ç¤ºä¸å¿…è¦çš„é”™è¯¯ä¿¡æ¯ã€‚</span>
</span></span><span class=line><span class=cl><span class=c1># awk &#39;/BEGIN CERTIFICATE/,/END CERTIFICATE/&#39;ï¼šä½¿ç”¨ awk æå–ä» BEGIN CERTIFICATE åˆ° END CERTIFICATE çš„æ‰€æœ‰å†…å®¹ã€‚</span>
</span></span><span class=line><span class=cl>openssl s_client -connect example.com:443 -showcerts &lt;/dev/null 2&gt;/dev/null <span class=p>|</span> awk <span class=s1>&#39;/BEGIN CERTIFICATE/,/END CERTIFICATE/&#39;</span> &gt;&gt; full_chain.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å®Œæ•´è¯ä¹¦é“¾ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>openssl x509 -in full_chain.pem -text -noout
</span></span></code></pre></td></tr></table></div></div><h1 id=éšæœºæ•°>éšæœºæ•°</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆ 16 å­—èŠ‚çš„éšæœºæ•°ï¼ˆäºŒè¿›åˆ¶ï¼‰ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° random.bin æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç”¨äº AES-128 åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl rand -out random.bin <span class=m>16</span>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆä¸€ä¸ª 32 å­—èŠ‚çš„éšæœºå¯†é’¥ï¼Œé€‚ç”¨äº AES-256 åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl rand -out key.bin <span class=m>32</span>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆä¸€ä¸ª 12 å­—èŠ‚çš„éšæœºå¯†ç ï¼Œå¹¶ä»¥ Base64 ç¼–ç æ ¼å¼è¾“å‡º</span>
</span></span><span class=line><span class=cl>openssl rand -base64 <span class=m>12</span>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆ 16 å­—èŠ‚çš„éšæœºæ•°ï¼Œå¹¶ä»¥åå…­è¿›åˆ¶æ ¼å¼è¾“å‡ºåˆ°æ§åˆ¶å°</span>
</span></span><span class=line><span class=cl>openssl rand -hex <span class=m>16</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆ 32 å­—èŠ‚é•¿åº¦äºŒè¿›åˆ¶éšæœºæ•°ï¼Œå­—ç¬¦æ•°ä¸º 32</span>
</span></span><span class=line><span class=cl>openssl rand <span class=m>32</span> <span class=p>|</span> wc -c <span class=c1># 32</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=rsa>RSA</h1><h2 id=rsa-å…¬ç§é’¥ç”Ÿæˆ>RSA å…¬ç§é’¥ç”Ÿæˆ</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆ 2048 ä½ RSA ç§é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># åé¢æ•°å­—ç¬”è¯•ç§é’¥ä½æ•°ï¼Œå¯ä»¥é€‰æ‹©æ›´é•¿çš„ 4096</span>
</span></span><span class=line><span class=cl>openssl genrsa -out private_key.pem <span class=m>2048</span> <span class=c1># ç®€å•çš„ç”Ÿæˆ rsa å¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl genrsa -aes256 -out private_key.pem <span class=m>2048</span> <span class=c1># å¯ä»¥å¯¹å¯†é’¥è¿›è¡Œ aes-cbc-256 åŠ å¯†</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>openssl rsa -in encrypted_private_key.pem -out decrypted_private_key.pem <span class=c1># å»é™¤ rsa å¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl rsa -in private_key.pem -out encrypted_private_key.pem -aes256 <span class=c1># ç»™ rsa å¯†é’¥å¯¹ç§°åŠ å¯†</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># genpkey å¯ä»¥ç”Ÿæˆå¾ˆå¤šç§ç®—æ³•çš„å¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048
</span></span><span class=line><span class=cl><span class=c1># å¯ä»¥ç”Ÿæˆå¸¦åŠ å¯†çš„å¯†é’¥ï¼Œ-aes128, -aes192, -aes256, -des, -des3, -camellia256, -camellia128, -camellia192</span>
</span></span><span class=line><span class=cl><span class=c1># åœ¨ä½¿ç”¨å¯†é’¥çš„åœ°æ–¹ï¼Œä¾‹å¦‚æå–å…¬é’¥æ—¶ï¼Œä¼šè¦æ±‚è¾“å…¥ç”Ÿæˆå¯†é’¥æ—¶ä¸€æ ·çš„åŠ å¯†å¯†é’¥è§£å¯†</span>
</span></span><span class=line><span class=cl>openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048 -aes256
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä»ç§é’¥å¯¼å‡ºå…¬é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -pubout å¯¼å‡ºå…¬é’¥æ–‡ä»¶ï¼Œä¸åŠ å¯¼å‡ºæ¥çš„ä»ç„¶æ˜¯ç§é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># é»˜è®¤å¯¼å‡ºæ ¼å¼æ˜¯ base64 çš„æ–‡æœ¬ PEM æ ¼å¼ï¼Œå¯ä»¥æŒ‡å®š -outform DER æŒ‡å®šäºŒè¿›åˆ¶æ–‡æœ¬</span>
</span></span><span class=line><span class=cl><span class=c1># -outform DER or PEM</span>
</span></span><span class=line><span class=cl>openssl rsa -in private_key.pem -out public_key.pem -pubout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä»æœåŠ¡å™¨è¯ä¹¦å¯¼å‡ºå…¬é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># å¯¼å‡ºä¸€ä¸ªç½‘ç«™çš„æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=p>|</span> openssl s_client -connect baidu.com:443 -servername baidu.com <span class=p>|</span> openssl x509 &gt; server.crt
</span></span><span class=line><span class=cl><span class=c1># x509 è¯ä¹¦ä¸­æå–å…¬é’¥æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl x509 -in server.crt -pubkey -noout &gt; publickey.pem
</span></span><span class=line><span class=cl><span class=c1># æ‰“å°å…¬é’¥æ–‡ä»¶å†…å®¹ï¼ŒæŸ¥çœ‹ä¿¡æ¯ï¼ˆä¹Ÿå¯ä»¥ä½œä¸ºæ ¡éªŒæ–¹å¼ï¼‰</span>
</span></span><span class=line><span class=cl>openssl rsa -pubin -in publickey.pem -text -noout
</span></span></code></pre></td></tr></table></div></div><h2 id=rsa-ç§é’¥åŠ å¯†ç­¾å-å…¬é’¥éªŒç­¾>RSA ç§é’¥åŠ å¯†ç­¾å, å…¬é’¥éªŒç­¾</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048
</span></span><span class=line><span class=cl><span class=c1># ä»ç§é’¥ä¸­æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl rsa -pubout -in private_key.pem -out public_key.pem
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆå¾…åŠ å¯†æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;è¿™æ˜¯ä¸€ä¸ªéœ€è¦åŠ å¯†çš„æ¶ˆæ¯ã€‚&#34;</span> &gt; message.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç§é’¥ç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -sign private_key.pem -out signature.bin message.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…¬é’¥éªŒç­¾</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -verify public_key.pem -signature signature.bin message.txt
</span></span></code></pre></td></tr></table></div></div><h2 id=rsa-å…¬é’¥åŠ å¯†-ç§é’¥è§£å¯†>RSA å…¬é’¥åŠ å¯†, ç§é’¥è§£å¯†</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048
</span></span><span class=line><span class=cl><span class=c1># ä»ç§é’¥ä¸­æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl rsa -pubout -in private_key.pem -out public_key.pem
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆå¾…åŠ å¯†æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;è¿™æ˜¯ä¸€ä¸ªéœ€è¦åŠ å¯†çš„æ¶ˆæ¯ã€‚&#34;</span> &gt; message.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…¬é’¥åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl rsautl -encrypt -inkey public_key.pem -pubin -in message.txt -out encrypted_message.bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç§é’¥è§£å¯†</span>
</span></span><span class=line><span class=cl>openssl rsautl -decrypt -inkey private_key.pem -in encrypted_message.bin -out decrypted_message.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¯”å¯¹è§£å¯†æ–‡ä»¶å’ŒåŸæ–‡ä»¶</span>
</span></span><span class=line><span class=cl>cmp message.txt decrypted_message.txt
</span></span><span class=line><span class=cl>diff message.txt decrypted_message.txt
</span></span><span class=line><span class=cl>md5sum message.txt decrypted_message.txt
</span></span></code></pre></td></tr></table></div></div><h1 id=x509-è¯ä¹¦ç›¸å…³æ“ä½œ>X.509 è¯ä¹¦ç›¸å…³æ“ä½œ</h1><p>åœ¨ X.509 è¯ä¹¦ä¸­ï¼Œ<code>subject</code>æ˜¯æŒ‡è¯ä¹¦çš„ä¸»é¢˜ä¿¡æ¯ï¼Œé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><code>C</code>ï¼šå›½å®¶ä»£ç ï¼ˆCountry Nameï¼‰</li><li><code>ST</code>ï¼šçœä»½æˆ–å·ä»£ç ï¼ˆState or Province Nameï¼‰</li><li><code>L</code>ï¼šåŸå¸‚æˆ–åœ°åŒºä»£ç ï¼ˆLocality Nameï¼‰</li><li><code>O</code>ï¼šç»„ç»‡åç§°ï¼ˆOrganization Nameï¼‰</li><li><code>OU</code>ï¼šç»„ç»‡å•ä½åç§°ï¼ˆOrganizational Unit Nameï¼‰</li><li><code>CN</code>ï¼šé€šç”¨åç§°ï¼ˆCommon Nameï¼‰</li><li><code>emailAddress</code>ï¼šç”µå­é‚®ä»¶åœ°å€ï¼ˆEmail Addressï¼‰</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># subject å­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl>/C<span class=o>=</span>CN/ST<span class=o>=</span>Beijing/L<span class=o>=</span>Beijing/O<span class=o>=</span>Example/CN<span class=o>=</span>example.com/emailAddress<span class=o>=</span>info@example.com
</span></span></code></pre></td></tr></table></div></div><h2 id=der-å’Œ-pem-æ ¼å¼è½¬æ¢>DER å’Œ PEM æ ¼å¼è½¬æ¢</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># PEM è½¬ DER</span>
</span></span><span class=line><span class=cl>openssl x509 -in mycert.pem -outform DER -out mycert.der
</span></span><span class=line><span class=cl><span class=c1># DER è½¬ PEM</span>
</span></span><span class=line><span class=cl>openssl x509 -in mycert.der -inform DER -outform PEM -out mycert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=å‡ ç§æå–å…¬é’¥çš„æ–¹æ³•>å‡ ç§æå–å…¬é’¥çš„æ–¹æ³•</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. ä» RSA ç§é’¥ä¸­æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -pubout æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl rsa -pubout -in private_key.pem -out public_key.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. ä» CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰ä¸­æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -noout ä¸æ‰“å°å‡º CSR åŸæ–‡</span>
</span></span><span class=line><span class=cl><span class=c1># -pubkey æå–å…¬é’¥ï¼ˆåˆ›å»ºè¯¥ CSR çš„æœåŠ¡å™¨ç§é’¥å¯¹åº”çš„å…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl req -in server.csr -noout -pubkey &gt; public_key.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. ä» X.509 è¯ä¹¦ä¸­æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -pubkey æå–å…¬é’¥ï¼ˆåˆ›å»ºè¯¥è¯ä¹¦çš„æœåŠ¡å™¨ç§é’¥å¯¹åº”çš„å…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl x509 -in server.crt -noout -pubkey &gt; public_key.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. ä» PKCS#12 æ–‡ä»¶ä¸­æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># å…ˆå°† p12 æå–ä¸å¸¦è¯ä¹¦çš„ç§é’¥</span>
</span></span><span class=line><span class=cl>openssl pkcs12 -in your_file.p12 -nocerts -out private_key.pem
</span></span><span class=line><span class=cl><span class=c1># å†å°†è¯¥ç§é’¥æå–å…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl rsa -in private_key.pem -pubout
</span></span></code></pre></td></tr></table></div></div><h2 id=ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦>ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genrsa -out private_key.pem <span class=m>2048</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»º CSR è¯ä¹¦è¯·æ±‚ï¼Œä¼šä¾æ¬¡å¡«å†™ä»¥ä¸‹ä¿¡æ¯</span>
</span></span><span class=line><span class=cl><span class=c1># CA è¯ä¹¦ Common Name éœ€è¦ä¿è¯å”¯ä¸€æ€§ï¼Œä¸è¦ä¸æœåŠ¡ç«¯è¯ä¹¦æˆ–è€…å®¢æˆ·ç«¯è¯ä¹¦çš„ Common Name ç›¸åŒ</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Country Name (2 letter code) [XX]:cn</span>
</span></span><span class=line><span class=cl><span class=c1># State or Province Name (full name) []:bj</span>
</span></span><span class=line><span class=cl><span class=c1># Locality Name (eg, city) [Default City]:bj</span>
</span></span><span class=line><span class=cl><span class=c1># Organization Name (eg, company) [Default Company Ltd]:alibaba</span>
</span></span><span class=line><span class=cl><span class=c1># Organizational Unit Name (eg, section) []:test</span>
</span></span><span class=line><span class=cl><span class=c1># Common Name (eg, your name or your servers hostname) []:root</span>
</span></span><span class=line><span class=cl><span class=c1># Email Address []:a.alibaba.com</span>
</span></span><span class=line><span class=cl><span class=c1># A challenge password []:</span>
</span></span><span class=line><span class=cl><span class=c1># An optional company name []:</span>
</span></span><span class=line><span class=cl>openssl req -new -key private_key.pem -out csr.pem
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ CSR è¯ä¹¦ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>openssl req -in csr.pem -noout -text
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=c1># openssl x509 ä¸æŒ‡å®š -CA å’Œ -CAkey, é¢å¤–æ·»åŠ  -signkey æŒ‡å®šä¸€ä¸ªå¯†é’¥ï¼Œå³å¯å®Œæˆæ—  CA çš„è‡ªç­¾åè¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -req -days <span class=m>365</span> -in csr.pem -signkey private_key.pem -out certificate.pem
</span></span><span class=line><span class=cl><span class=c1># æˆ–è€…ç›´æ¥ç”¨ subj ä»£æ›¿ csr</span>
</span></span><span class=line><span class=cl><span class=c1># -subj ç›´æ¥ç”¨ç§é’¥ç­¾å‘è¯ä¹¦ï¼Œè·³è¿‡ CSR åˆ›å»ºï¼ˆsubject è¡¨è¾¾å¼åŒ…å« CSR æ‰€æœ‰å†…å®¹ï¼‰</span>
</span></span><span class=line><span class=cl>openssl req -new -x509 -key private_key.pem -out certificate.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/C=CN/ST=Beijing/L=Beijing/O=My Company/CN=example.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>openssl x509 -in certificate.pem -text -noout
</span></span></code></pre></td></tr></table></div></div><h3 id=è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯”>è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯”</h3><p>ä½¿ç”¨ <code>openssl x509</code> ç­¾å‘è¯ä¹¦ï¼Œéœ€è¦è¾“å…¥ CSR æ–‡ä»¶ï¼Œå…¶ç”Ÿæˆçš„è¯ä¹¦ç‰ˆæœ¬ä¸º Version 1ï¼Œå°‘äº† X509v3 çš„é¢å¤–æ ‡è¯†ï¼›ï¼ˆopenssl 3.0 ä»¥ä¸Šç‰ˆæœ¬é»˜è®¤ç”Ÿæˆ
X509v3</p><p>ä½¿ç”¨ <code>openssl req</code> ç­¾å‘è¯ä¹¦ï¼Œå¯ä»¥ç”¨ <code>-subj</code> æ›¿ä»£ CSR æ–‡ä»¶ï¼Œå…¶è¯ä¹¦ç‰ˆæœ¬ä¸º X509v3ï¼Œæœ‰é¢å¤–çš„æ ‡è¯†ä¿¡æ¯ï¼›</p><p><img src=/post/openssl-and-x509-certificate-related/image1.png width=2562 height=1778 srcset="/post/openssl-and-x509-certificate-related/image1_hu_eb3b4c239563c5d1.png 480w, /post/openssl-and-x509-certificate-related/image1_hu_cf4ddddf2071e9e.png 1024w" loading=lazy alt=è‡ªç­¾åè¯ä¹¦çš„ä¸¤ç§æ–¹å¼å¯¹æ¯” class=gallery-image data-flex-grow=144 data-flex-basis=345px></p><h3 id=å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥>å¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥</h3><p>è¿™ç§æ–¹å¼ä¸€èˆ¬å¯ä»¥å¿«é€Ÿç”Ÿæˆ CA è¯ä¹¦åŠå…¶å¯†é’¥ï¼›</p><p>ä¸é€‚ç”¨äº CA ç­¾å‘çš„è¯ä¹¦ï¼Œå› ä¸º CA ç­¾å‘è¯ä¹¦éœ€è¦ç”¨ <code>openssl x509</code>ï¼Œéœ€è¦æŒ‡å®š CSR æ–‡ä»¶ï¼Œè€Œä¸èƒ½ç”¨ <code>-subj</code> æ›¿ä»£ CSRï¼Œå¦å¤–
<code>openssl req</code> ä¹Ÿæ²¡æœ‰ <code>-CA</code> <code>-CAKey</code> é€‰é¡¹ï¼›åªèƒ½å•ç‹¬ç”Ÿæˆ CSR æ–‡ä»¶ï¼Œç”¨ <code>openssl x509</code> ç­¾å‘è¯ä¹¦ï¼›</p><p>ä½¿ç”¨ <code>openssl req</code> é»˜è®¤ç”Ÿæˆ <code>-keyout</code> çš„å¯†é’¥æ–‡ä»¶æ˜¯å¸¦åŠ å¯†çš„ <code>pkcs#8</code>ï¼Œå¯ä»¥ç”¨ <code>openssl rsa</code> è½¬ä¸º <code>pkcs#1</code> éåŠ å¯†å¯†é’¥ï¼›ä¹Ÿå¯ä»¥æ‰§è¡Œæ—¶æ·»åŠ 
<code>-nodes</code>ï¼Œç›´æ¥ç”Ÿæˆä¸åŠ å¯†å¯†é’¥</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æ ¹æ® -subj å†…å®¹ç­¾å‘è¯ä¹¦ï¼Œå¯†é’¥è‡ªåŠ¨ç”Ÿæˆ</span>
</span></span><span class=line><span class=cl><span class=c1># -nodesï¼Œè¡¨ç¤ºç”Ÿæˆçš„å¯†é’¥æ˜¯åŸå¯†é’¥ï¼Œä¸å¸¦å¯¹ç§°åŠ å¯†ï¼Œå¦åˆ™éœ€è¦æ‰‹åŠ¨è¾“å…¥å¯¹ç§°åŠ å¯†å¯†é’¥, openssl v3.0 æ›¿æ¢ä¸º -noenc</span>
</span></span><span class=line><span class=cl><span class=c1># -newkey rsa:2048ï¼Œè¡¨ç¤ºç”Ÿæˆçš„å¯†é’¥ä¸º RSA å¯†é’¥ï¼Œ2048 ä½ï¼ŒåŒæ ·æ”¯æŒ 1024, 3072, 4096, 8192 ç­‰</span>
</span></span><span class=line><span class=cl><span class=c1># -keyout, æŒ‡å®šè¾“å‡ºçš„å¯†é’¥æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=c1># -out, æŒ‡å®šç­¾å‘çš„è¯ä¹¦æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=c1># -days, æŒ‡å®šæœ‰æ•ˆæœŸï¼Œå¼€å§‹æ—¶é—´ä»ç­¾å‘æ—¶åˆ»ç®—èµ·</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout rootCA.key -out rootCA.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=Root CA&#34;</span> -newkey rsa:2048
</span></span></code></pre></td></tr></table></div></div><p><strong>openssl 3.0</strong> ä»¥ä¸Šç‰ˆæœ¬ï¼Œ<code>openssl req</code> å¯ä»¥é™„åŠ  <code>-CA</code> å’Œ <code>-CAKey</code> é€‰é¡¹ï¼Œå®ç°å¿«é€Ÿ CA ç­¾å‘è¯ä¹¦</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout server.key -out server.crt -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=server.example.com&#34;</span> -CA rootCA.pem -CAkey rootCA.key
</span></span></code></pre></td></tr></table></div></div><p><strong>openssl 3.0</strong> ä»¥ä¸Šï¼Œå¯ä»¥è®¾ç½®è¯ä¹¦æœ‰æ•ˆæœŸèµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´ <code>-not_before</code> <code>-not_after</code> ï¼Œæ—¥æœŸæ ¼å¼ä¸º <code>YYYYMMDDHHMMSSZ</code>ï¼Œå…¶ä¸­
<code>Z</code>è¡¨ç¤º UTC æ—¶åŒºã€‚<code>-not_after</code> ä¼šå°† <code>-days</code> è¦†ç›–å¤±æ•ˆï¼›å¦‚æœåªç”¨ <code>-not_before</code> å’Œ <code>-days</code> ï¼Œç»ˆæ­¢æ—¶é—´æ˜¯ä»æ‰§è¡Œå‘½ä»¤å¼€å§‹è®¡ç®— +
days å¤©çš„æ—¶é—´ï¼Œè€Œä¸æ˜¯èµ·å§‹æ—¶é—´å¼€å§‹è¿½åŠ ï¼›</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout server.key -out server.crt -subj <span class=s2>&#34;/CN=server.example.com&#34;</span> -CA rootCA.pem -CAkey rootCA.key -not_before 20060102150405Z -not_after 20250102150405Z
</span></span></code></pre></td></tr></table></div></div><h2 id=æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é…>æ ¡éªŒç§é’¥ä¸è¯ä¹¦æ˜¯å¦åŒ¹é…</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl genrsa -out server.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -new -x509 -key server.key -out server.crt -days <span class=m>365</span> -subj <span class=s2>&#34;/C=CN/ST=Beijing/L=Beijing/O=My Company/CN=example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># è®¡ç®—è¯ä¹¦å’Œç§é’¥çš„æ¨¡æ•°ï¼Œç›¸ç­‰åˆ™åŒ¹é…</span>
</span></span><span class=line><span class=cl>openssl x509 -in server.crt -noout -modulus <span class=p>|</span> openssl md5
</span></span><span class=line><span class=cl>openssl rsa -in server.key -noout -modulus <span class=p>|</span> openssl md5
</span></span></code></pre></td></tr></table></div></div><h2 id=ca-ç­¾å‘è¯ä¹¦>CA ç­¾å‘è¯ä¹¦</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å¿«é€Ÿç”Ÿæˆæ ¹è¯ä¹¦å’Œå¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout rootCA.key -out rootCA.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=Root CA&#34;</span> -newkey rsa:2048
</span></span><span class=line><span class=cl><span class=c1># ç”ŸæˆæœåŠ¡å™¨å¯†é’¥å’Œ CSR</span>
</span></span><span class=line><span class=cl>openssl genrsa -out server.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -new -key server.key -out server.csr -subj <span class=s2>&#34;/CN=Server&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ CSR</span>
</span></span><span class=line><span class=cl>openssl req -in server.csr -noout -text
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨æ ¹è¯ä¹¦ç­¾ç½²æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=c1># -CAcreateserial, ç”Ÿæˆä¸€ä¸ªåºåˆ—å·å¹¶å°†å…¶å†™å…¥ä¸€ä¸ªåä¸º serial çš„æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days <span class=m>365</span>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -in server.crt -noout -text
</span></span><span class=line><span class=cl><span class=c1># ç”¨ CA è¯ä¹¦éªŒè¯æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl verify -CAfile rootCA.pem server.crt
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ä½¿ç”¨ CA ç­¾å‘è¯ä¹¦ä¸èƒ½ä½¿ç”¨ä¸Šè¿°ã€Œå¿«é€Ÿç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥ã€ï¼Œå› ä¸ºéœ€è¦ç”¨åˆ° CSR æ–‡ä»¶ï¼Œå› æ­¤éœ€è¦å•ç‹¬ç”Ÿæˆå¯†é’¥å’Œ CSR</p></blockquote><h3 id=caç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹>CAç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹</h3><ul><li>è‡ªç­¾åè¯ä¹¦çš„ Issuer é¢å‘è€…ä¹Ÿæ˜¯è‡ªå·±</li><li>CA ç­¾å‘è¯ä¹¦çš„ Issuer æ˜¯ CA</li></ul><p><img src=/post/openssl-and-x509-certificate-related/image2.png width=2428 height=576 srcset="/post/openssl-and-x509-certificate-related/image2_hu_46654d30facbfd37.png 480w, /post/openssl-and-x509-certificate-related/image2_hu_a7e4943faa2f5df.png 1024w" loading=lazy alt="CA ç­¾å‘è¯ä¹¦ä¸è‡ªç­¾åè¯ä¹¦ä¸åŒç‚¹" class=gallery-image data-flex-grow=421 data-flex-basis=1011px></p><h2 id=ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º-csr-å’Œ-x509-è¯ä¹¦>ä½¿ç”¨é…ç½®æ–‡ä»¶åˆ›å»º CSR å’Œ X509 è¯ä¹¦</h2><p>é…ç½®æ–‡ä»¶çš„åˆ›å»ºæ–¹å¼è¾ƒä¸ºéº»çƒ¦ï¼Œä½†æ˜¯æä¾›æ›´åŠ ç²¾ç»†åŒ–çš„å®šåˆ¶é…ç½®ï¼Œä¸€èˆ¬æ¥è¯´ä»¥ä¸Šçš„åˆ›å»ºæ–¹å¼è¶³å¤Ÿè‡ªç­¾åä½¿ç”¨ï¼Œæ— éœ€é…ç½®æ–‡ä»¶æ–¹å¼åˆ›å»ºï¼›</p><h3 id=é…ç½®æ–‡ä»¶åˆ›å»º-csr>é…ç½®æ–‡ä»¶åˆ›å»º CSR</h3><p>åˆ›å»º <code>csr.cnf</code> æ–‡ä»¶</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># é…ç½®æ–‡ä»¶ç”¨äºç”Ÿæˆ CSR</span>
</span></span><span class=line><span class=cl><span class=o>[</span> req <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>default_bits</span>        <span class=o>=</span> <span class=m>2048</span>           <span class=c1># å¯†é’¥é•¿åº¦ï¼Œå¸¸è§å€¼ï¼š2048(å¸¸ç”¨), 3072, 4096</span>
</span></span><span class=line><span class=cl><span class=nv>default_keyfile</span>     <span class=o>=</span> server.key     <span class=c1># ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶å</span>
</span></span><span class=line><span class=cl><span class=nv>default_md</span>          <span class=o>=</span> sha256         <span class=c1># ç­¾åå“ˆå¸Œç®—æ³•ï¼Œæ¨èä½¿ç”¨ SHA256(å¸¸ç”¨), SHA384, SHA512</span>
</span></span><span class=line><span class=cl><span class=nv>prompt</span>              <span class=o>=</span> no             <span class=c1># æ˜¯å¦äº¤äº’å¼è¾“å…¥ä¿¡æ¯</span>
</span></span><span class=line><span class=cl><span class=nv>distinguished_name</span>  <span class=o>=</span> req_distinguished_name  <span class=c1># æŒ‡å®šä¸»ä½“å­—æ®µçš„é…ç½®éƒ¨åˆ†</span>
</span></span><span class=line><span class=cl><span class=nv>req_extensions</span>      <span class=o>=</span> req_ext        <span class=c1># CSR çš„æ‰©å±•éƒ¨åˆ†ï¼Œå¼•ç”¨ [req_ext]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> req_distinguished_name <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>C</span>                   <span class=o>=</span> CN             <span class=c1># å›½å®¶ä»£ç ï¼ˆä¸¤ä½å­—æ¯ï¼Œå¦‚ CNã€USï¼‰</span>
</span></span><span class=line><span class=cl><span class=nv>ST</span>                  <span class=o>=</span> Beijing        <span class=c1># å·æˆ–çœä»½</span>
</span></span><span class=line><span class=cl><span class=nv>L</span>                   <span class=o>=</span> Beijing        <span class=c1># åŸå¸‚</span>
</span></span><span class=line><span class=cl><span class=nv>O</span>                   <span class=o>=</span> ExampleCorp    <span class=c1># ç»„ç»‡åç§°</span>
</span></span><span class=line><span class=cl><span class=nv>OU</span>                  <span class=o>=</span> IT Department  <span class=c1># ç»„ç»‡å•å…ƒ</span>
</span></span><span class=line><span class=cl><span class=nv>CN</span>                  <span class=o>=</span> example.com    <span class=c1># é€šç”¨åç§°ï¼ˆåŸŸåæˆ– IP åœ°å€ï¼‰</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> req_ext <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>subjectAltName</span>      <span class=o>=</span> @alt_names     <span class=c1># å¼•ç”¨ [alt_names] å®šä¹‰ SAN æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span>    <span class=o>=</span> critical,CA:TRUE,pathlen:0 <span class=c1># åŸºæœ¬çº¦æŸ</span>
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span>            <span class=o>=</span> critical, digitalSignature, keyEncipherment <span class=c1># å…¬é’¥ç”¨é€”</span>
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span>    <span class=o>=</span> serverAuth, clientAuth <span class=c1># æ‰©å±•ç”¨é€”</span>
</span></span><span class=line><span class=cl><span class=nv>subjectKeyIdentifier</span> <span class=o>=</span> <span class=nb>hash</span> <span class=c1># ä¸»é¢˜å¯†é’¥æ ‡è¯†ç¬¦</span>
</span></span><span class=line><span class=cl><span class=nv>crlDistributionPoints</span> <span class=o>=</span> @disribution_points <span class=c1># CRL åˆ†å‘ç‚¹</span>
</span></span><span class=line><span class=cl><span class=nv>certificatePolicies</span> <span class=o>=</span> 1.3.6.1.4.1.12345.1.1.1, 1.2.3.4.5.6.7.8.9.1 <span class=c1># è¯ä¹¦ç­–ç•¥</span>
</span></span><span class=line><span class=cl><span class=nv>authorityInfoAccess</span> <span class=o>=</span> OCSP<span class=p>;</span>URI:http://ocsp.example.com/, caIssuers<span class=p>;</span>URI:http://myca.example.com/ca.cer <span class=c1># æˆæƒä¿¡æ¯è®¿é—®</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> alt_names <span class=o>]</span>
</span></span><span class=line><span class=cl>DNS.1               <span class=o>=</span> example.com    <span class=c1># æ›¿ä»£åç§°ï¼šåŸŸå</span>
</span></span><span class=line><span class=cl>DNS.2               <span class=o>=</span> www.example.com <span class=c1># æ›¿ä»£åç§°ï¼šå­åŸŸå</span>
</span></span><span class=line><span class=cl>IP.1                <span class=o>=</span> 192.168.1.1    <span class=c1># æ›¿ä»£åç§°ï¼šIP åœ°å€</span>
</span></span><span class=line><span class=cl><span class=nv>email</span>               <span class=o>=</span> info@example.com <span class=c1># æ›¿ä»£åç§°ï¼šé‚®ç®±</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> disribution_points <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>URI</span>                 <span class=o>=</span> http://crl.example.com/crl.pem
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆæ ¹è¯ä¹¦å’Œå¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout rootCA.key -out rootCA.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=Root CA&#34;</span> -newkey rsa:2048
</span></span><span class=line><span class=cl><span class=c1># ç”ŸæˆæœåŠ¡å™¨ç§é’¥å’Œ CSR æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=c1># -nodesï¼Œç”Ÿæˆä¸åŠ å¯†çš„æœåŠ¡å™¨å¯†é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -config æŒ‡å®š CSR é…ç½®æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl req -new -nodes -config csr.cnf -out server.csr
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ CSR å†…å®¹</span>
</span></span><span class=line><span class=cl>openssl req -in server.csr -noout -text
</span></span></code></pre></td></tr></table></div></div><p>CSR å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Subject: <span class=nv>C</span><span class=o>=</span>CN, <span class=nv>ST</span><span class=o>=</span>Beijing, <span class=nv>L</span><span class=o>=</span>Beijing, <span class=nv>O</span><span class=o>=</span>ExampleCorp, <span class=nv>OU</span><span class=o>=</span>IT Department, <span class=nv>CN</span><span class=o>=</span>example.com
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>Requested Extensions:
</span></span><span class=line><span class=cl>    X509v3 Subject Alternative Name: 
</span></span><span class=line><span class=cl>        DNS:example.com, DNS:www.example.com, IP Address:192.168.1.1, email:info@example.com
</span></span><span class=line><span class=cl>    X509v3 Basic Constraints: critical
</span></span><span class=line><span class=cl>        CA:TRUE, pathlen:0
</span></span><span class=line><span class=cl>    X509v3 Key Usage: critical
</span></span><span class=line><span class=cl>        Digital Signature, Key Encipherment
</span></span><span class=line><span class=cl>    X509v3 Extended Key Usage: 
</span></span><span class=line><span class=cl>        TLS Web Server Authentication, TLS Web Client Authentication
</span></span><span class=line><span class=cl>    X509v3 Subject Key Identifier: 
</span></span><span class=line><span class=cl>        73:80:FD:8E:8F:D0:7E:4E:CB:87:A2:DC:60:44:4B:4F:66:70:73:5A
</span></span><span class=line><span class=cl>    X509v3 CRL Distribution Points: 
</span></span><span class=line><span class=cl>        Full Name:
</span></span><span class=line><span class=cl>          URI:http://crl.example.com/crl.pem
</span></span><span class=line><span class=cl>    X509v3 Certificate Policies: 
</span></span><span class=line><span class=cl>        Policy: 1.3.6.1.4.1.12345.1.1.1
</span></span><span class=line><span class=cl>        Policy: 1.2.3.4.5.6.7.8.9.1
</span></span><span class=line><span class=cl>    Authority Information Access: 
</span></span><span class=line><span class=cl>        OCSP - URI:http://ocsp.example.com/
</span></span><span class=line><span class=cl>        CA Issuers - URI:http://myca.example.com/ca.cer
</span></span></code></pre></td></tr></table></div></div><blockquote><p>æ³¨ï¼šè¯¥ CSR é‡Œçš„æ‰©å±•å†…å®¹ Requested Extensionsï¼Œç›´æ¥åº”ç”¨åˆ° X509 è¯ä¹¦ç­¾å‘æ—¶ï¼Œä¸ä¼šç›´æ¥åº”ç”¨åˆ°è¯ä¹¦ä¸­ï¼›ä¾‹å¦‚ CSR è™½ç„¶é…ç½®äº† SANï¼Œä½†æ˜¯
X509 è¯ä¹¦æ˜¯æ²¡æœ‰çš„ï¼Œå¿…é¡»åœ¨ç­¾å‘ X509 è¯ä¹¦æ—¶æ˜¾å¼æŒ‡å®šå‡ºæ¥</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ä½¿ç”¨æ ¹è¯ä¹¦ç­¾ç½²æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days <span class=m>365</span>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -in server.crt -noout -text
</span></span><span class=line><span class=cl><span class=c1># ç”¨ CA è¯ä¹¦éªŒè¯æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl verify -CAfile rootCA.pem server.crt
</span></span></code></pre></td></tr></table></div></div><p>å®é™…åªæœ‰åŸºç¡€é¡¹ï¼Œè€Œä¸å…·æœ‰æ‰©å±•å†…å®¹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 extensions:
</span></span><span class=line><span class=cl>    X509v3 Subject Key Identifier: 
</span></span><span class=line><span class=cl>        73:80:FD:8E:8F:D0:7E:4E:CB:87:A2:DC:60:44:4B:4F:66:70:73:5A
</span></span><span class=line><span class=cl>    X509v3 Authority Key Identifier: 
</span></span><span class=line><span class=cl>        30:7B:AA:31:4F:DA:F0:F4:22:22:6B:E9:96:C4:BF:A5:84:10:DB:03
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®æ–‡ä»¶åˆ›å»º-x509-è¯ä¹¦>é…ç½®æ–‡ä»¶åˆ›å»º X509 è¯ä¹¦</h3><p>åˆ›å»º X509v3 é…ç½®æ–‡ä»¶ <code>v3.ext</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># é…ç½®æ–‡ä»¶ç”¨äºç­¾å‘è¯ä¹¦æ—¶çš„æ‰©å±•è®¾ç½®</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CA è¯ä¹¦æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=o>[</span> v3_ca <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span> <span class=o>=</span> keyid:always,issuer  <span class=c1># æˆæƒå¯†é’¥æ ‡è¯†ç¬¦</span>
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span>       <span class=o>=</span> critical,CA:TRUE,pathlen:1  <span class=c1># æ ‡è®°ä¸º CAï¼Œé™åˆ¶é“¾é•¿åº¦</span>
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span>               <span class=o>=</span> critical, digitalSignature, keyCertSign, cRLSign  <span class=c1># å¯†é’¥ç”¨é€”</span>
</span></span><span class=line><span class=cl><span class=nv>subjectKeyIdentifier</span>   <span class=o>=</span> <span class=nb>hash</span>  <span class=c1># ä¸»é¢˜å¯†é’¥æ ‡è¯†ç¬¦</span>
</span></span><span class=line><span class=cl><span class=nv>nameConstraints</span>        <span class=o>=</span> permitted<span class=p>;</span>email:.example.com<span class=p>;</span>DNS:.example.com  <span class=c1># åç§°çº¦æŸ</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœåŠ¡å™¨è¯ä¹¦æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=o>[</span> v3_server <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span> <span class=o>=</span> keyid,issuer  <span class=c1># æˆæƒå¯†é’¥æ ‡è¯†ç¬¦</span>
</span></span><span class=line><span class=cl><span class=nv>subjectKeyIdentifier</span>   <span class=o>=</span> <span class=nb>hash</span> <span class=c1># ä¸»é¢˜å¯†é’¥æ ‡è¯†ç¬¦</span>
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span>       <span class=o>=</span> critical,CA:FALSE  <span class=c1># æ ‡è®°ä¸ºé CA è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span>               <span class=o>=</span> critical, digitalSignature, keyEncipherment  <span class=c1># å¯†é’¥ç”¨é€”</span>
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span>       <span class=o>=</span> serverAuth,clientAuth  <span class=c1># æ‰©å±•å¯†é’¥ç”¨é€”ï¼Œæ ‡è®°ä¸ºæœåŠ¡å™¨è®¤è¯å’Œå®¢æˆ·ç«¯è®¤è¯</span>
</span></span><span class=line><span class=cl><span class=nv>subjectAltName</span>         <span class=o>=</span> DNS:example.com, DNS:www.example.com, IP:192.168.1.1, email:info@example.com  <span class=c1># SAN æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=nv>crlDistributionPoints</span>  <span class=o>=</span> URI:http://example.com/crl.pem  <span class=c1># CRL åˆ†å‘ç‚¹</span>
</span></span><span class=line><span class=cl><span class=nv>certificatePolicies</span>    <span class=o>=</span> 1.3.6.1.4.1.12345.1.1.1, 1.2.3.4.5.6.7.8.9.1 <span class=c1># è¯ä¹¦ç­–ç•¥</span>
</span></span><span class=line><span class=cl><span class=nv>authorityInfoAccess</span>    <span class=o>=</span> OCSP<span class=p>;</span>URI:http://ocsp.example.com/, caIssuers<span class=p>;</span>URI:http://myca.example.com/ca.cer <span class=c1># æˆæƒä¿¡æ¯è®¿é—®</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å®¢æˆ·ç«¯è¯ä¹¦æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=o>[</span> v3_client <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span> <span class=o>=</span> keyid,issuer
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span>       <span class=o>=</span> CA:FALSE
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span>               <span class=o>=</span> critical, digitalSignature, keyEncipherment
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span>       <span class=o>=</span> clientAuth  <span class=c1># å®¢æˆ·ç«¯è®¤è¯ç”¨é€”</span>
</span></span><span class=line><span class=cl><span class=nv>subjectAltName</span>         <span class=o>=</span> email:client@example.com
</span></span><span class=line><span class=cl><span class=nv>nsComment</span>              <span class=o>=</span> <span class=s2>&#34;OpenSSL Generated Certificate&#34;</span>  <span class=c1># æ³¨é‡Š</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># OCSP è¯ä¹¦æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=o>[</span> v3_ocsp <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span> <span class=o>=</span> keyid,issuer
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span>       <span class=o>=</span> CA:FALSE
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span>               <span class=o>=</span> critical, digitalSignature
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span>       <span class=o>=</span> OCSPSigning  <span class=c1># OCSP ç­¾åç”¨é€”</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ—¶é—´æˆ³è¯ä¹¦æ‰©å±•</span>
</span></span><span class=line><span class=cl><span class=o>[</span> v3_timestamp <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span> <span class=o>=</span> keyid,issuer
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span>       <span class=o>=</span> CA:FALSE
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span>               <span class=o>=</span> critical, digitalSignature
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span>       <span class=o>=</span> timeStamping  <span class=c1># æ—¶é—´æˆ³ç”¨é€”</span>
</span></span></code></pre></td></tr></table></div></div><p>å»¶ç»­ä¸Šæ–¹ç¤ºä¾‹ï¼Œç”Ÿæˆ <code>rootCA.pem</code>, <code>rootCA.key</code>, <code>server.csr</code>ï¼›</p><p>ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œåˆ›å»º CA ç­¾å‘çš„æœåŠ¡å™¨ X509v3 è¯ä¹¦</p><p>åœ¨æ ¹è¯ä¹¦ç­¾å‘æœåŠ¡å™¨è¯ä¹¦åŸºç¡€ä¸Šï¼Œæ·»åŠ  <code>-extfile</code> æŒ‡å®šä»¥ä¸Šé…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶ <code>-extensions</code> æŒ‡å®šå¯¹åº”çš„è¯ä¹¦æ‰©å±•é¡¹åï¼Œå¦‚æœåŠ¡å™¨è¯ä¹¦æ‰©å±•æ˜¯
<code>v3_server</code>ï¼Œåå­—å¯ä»¥è‡ªå®šä¹‰ï¼›å¦‚æœè¯¥é…ç½®æ–‡ä»¶å¹³é“ºï¼Œä¸å½’ç±»ï¼Œç±»ä¼¼ <code>properties</code> é…ç½®æ–‡ä»¶å½¢å¼ï¼Œåˆ™å¯ä»¥å¿½ç•¥ <code>-extensions</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># -extfile æŒ‡å®š x509v3 é…ç½®æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -out server.crt -days <span class=m>365</span> -extfile v3.ext -extensions v3_server
</span></span><span class=line><span class=cl><span class=c1># CA éªŒè¯è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl verify -CAfile rootCA.pem server.crt
</span></span></code></pre></td></tr></table></div></div><p>è¯ä¹¦æ‰©å±•å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 extensions:
</span></span><span class=line><span class=cl>    X509v3 Subject Key Identifier: 
</span></span><span class=line><span class=cl>        73:80:FD:8E:8F:D0:7E:4E:CB:87:A2:DC:60:44:4B:4F:66:70:73:5A
</span></span><span class=line><span class=cl>    X509v3 Authority Key Identifier: 
</span></span><span class=line><span class=cl>        30:7B:AA:31:4F:DA:F0:F4:22:22:6B:E9:96:C4:BF:A5:84:10:DB:03
</span></span><span class=line><span class=cl>    X509v3 Basic Constraints: critical
</span></span><span class=line><span class=cl>        CA:FALSE
</span></span><span class=line><span class=cl>    X509v3 Key Usage: critical
</span></span><span class=line><span class=cl>        Digital Signature, Key Encipherment
</span></span><span class=line><span class=cl>    X509v3 Extended Key Usage: 
</span></span><span class=line><span class=cl>        TLS Web Server Authentication, TLS Web Client Authentication
</span></span><span class=line><span class=cl>    X509v3 Subject Alternative Name: 
</span></span><span class=line><span class=cl>        DNS:example.com, DNS:www.example.com, IP Address:192.168.1.1, email:info@example.com
</span></span><span class=line><span class=cl>    X509v3 CRL Distribution Points: 
</span></span><span class=line><span class=cl>        Full Name:
</span></span><span class=line><span class=cl>          URI:http://example.com/crl.pem
</span></span><span class=line><span class=cl>    X509v3 Certificate Policies: 
</span></span><span class=line><span class=cl>        Policy: 1.3.6.1.4.1.12345.1.1.1
</span></span><span class=line><span class=cl>        Policy: 1.2.3.4.5.6.7.8.9.1
</span></span><span class=line><span class=cl>    Authority Information Access: 
</span></span><span class=line><span class=cl>        OCSP - URI:http://ocsp.example.com/
</span></span><span class=line><span class=cl>        CA Issuers - URI:http://myca.example.com/ca.cer
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä»–ç±»å‹è¯ä¹¦åŒç†ï¼Œåªéœ€è¦ä¿®æ”¹ <code>-extensions</code> æ‰¾åˆ°å¯¹åº”åˆ†ç»„å³å¯ï¼Œæˆ–å•ç‹¬åˆ›å»ºé…ç½®æ–‡ä»¶</p><h2 id=x509v3-æ‰©å±•å‚æ•°>X509v3 æ‰©å±•å‚æ•°</h2><p>X.509 v3 è¯ä¹¦é€šè¿‡æ‰©å±•å­—æ®µå¢åŠ åŠŸèƒ½å’Œçµæ´»æ€§ï¼Œä»¥ä¸‹æ˜¯å¸¸è§çš„æ‰©å±•ï¼š</p><details><summary>Basic Constraints: æŒ‡ç¤ºè¯ä¹¦çš„åŸºæœ¬çº¦æŸ</summary><ul><li><strong>CAï¼ˆCertificate Authorityï¼‰</strong>ï¼šæŒ‡ç¤ºè¯¥è¯ä¹¦æ˜¯å¦å¯ä»¥ç”¨ä½œè¯ä¹¦é¢å‘æœºæ„çš„è¯ä¹¦ã€‚å¦‚æœè®¾ç½®ä¸º <code>CA:TRUE</code>ï¼Œåˆ™è¡¨ç¤ºè¯¥è¯ä¹¦å¯ä»¥ç”¨äºç­¾å‘å…¶ä»–è¯ä¹¦ï¼›å¦‚æœè®¾ç½®ä¸º
<code>CA:FALSE</code>ï¼Œåˆ™è¡¨ç¤ºè¯¥è¯ä¹¦ä¸èƒ½ç”¨äºç­¾å‘å…¶ä»–è¯ä¹¦ã€‚</li><li><strong>è·¯å¾„é•¿åº¦é™åˆ¶ï¼ˆPath Length Constraintï¼‰</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„æ•´æ•°å€¼ï¼Œè¡¨ç¤ºä»è¯¥è¯ä¹¦å¼€å§‹çš„è¯ä¹¦é“¾ä¸­ï¼Œæœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªä¸­é—´ CA è¯ä¹¦ï¼ˆè¯¥
CA è¯ä¹¦å…è®¸ç­¾å‘è¯ä¹¦æ•°ä¸Šé™ï¼‰ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®è·¯å¾„é•¿åº¦é™åˆ¶ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ã€‚</li><li>å½“ <code>basicConstraints</code> è¢«æ ‡è®°ä¸º <code>critical</code> æ—¶ï¼Œè¡¨ç¤ºè¯¥æ‰©å±•æ˜¯å…³é”®çš„ï¼Œå¿…é¡»è¢«æ‰€æœ‰ä½¿ç”¨è¯¥è¯ä¹¦çš„åº”ç”¨ç¨‹åºç†è§£ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸æ”¯æŒæˆ–ä¸ç†è§£è¿™ä¸ªæ‰©å±•ï¼Œå®ƒåº”è¯¥æ‹’ç»ä½¿ç”¨è¯¥è¯ä¹¦ã€‚è¿™æ„å‘³ç€
<code>basicConstraints</code> çš„å­˜åœ¨å’Œå†…å®¹å¯¹äºè¯ä¹¦çš„æ­£ç¡®ä½¿ç”¨æ˜¯è‡³å…³é‡è¦çš„ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>basicConstraints</span> <span class=o>=</span> critical,CA:FALSE,pathlen:2
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 extensions:
</span></span><span class=line><span class=cl>    X509v3 Basic Constraints: critical
</span></span><span class=line><span class=cl>        CA:FALSE, pathlen:2
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Key Usage: å®šä¹‰å…¬é’¥çš„ç”¨é€”ï¼Œå¦‚ç­¾åã€åŠ å¯†æˆ–å¯†é’¥åå•†ç­‰</summary><ul><li><strong>digitalSignature</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥è¿›è¡Œæ•°å­—ç­¾åï¼Œä¾‹å¦‚ç”¨äºèº«ä»½éªŒè¯å’Œæ•°æ®å®Œæ•´æ€§ã€‚(å¸¸ç”¨</li><li><strong>nonRepudiation</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥è¿›è¡Œä¸å¯å¦è®¤æ€§ç­¾åï¼Œé€šå¸¸ç”¨äºè¯æ˜æŸä¸ªæ“ä½œçš„çœŸå®æ€§ã€‚</li><li><strong>keyEncipherment</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥åŠ å¯†å¯†é’¥ï¼Œä¾‹å¦‚åœ¨ SSL/TLS ä¸­ç”¨äºåŠ å¯†ä¼šè¯å¯†é’¥ã€‚ï¼ˆå¸¸ç”¨</li><li><strong>dataEncipherment</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥åŠ å¯†æ•°æ®ã€‚</li><li><strong>keyAgreement</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥è¿›è¡Œå¯†é’¥åå•†ï¼Œä¾‹å¦‚åœ¨ Diffie-Hellman å¯†é’¥äº¤æ¢ä¸­ã€‚</li><li><strong>keyCertSign</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥ç­¾ç½²è¯ä¹¦ã€‚ï¼ˆé€šå¸¸ç”¨äº CA è¯ä¹¦</li><li><strong>cRLSign</strong>: å…è®¸ä½¿ç”¨è¯¥å…¬é’¥ç­¾ç½²è¯ä¹¦æ’¤é”€åˆ—è¡¨ (CRL)ã€‚ï¼ˆé€šå¸¸ç”¨äº CA è¯ä¹¦</li><li><strong>encipherOnly</strong>: ä»…å…è®¸ä½¿ç”¨è¯¥å…¬é’¥è¿›è¡ŒåŠ å¯†æ“ä½œï¼Œé€šå¸¸ç”¨äºå¯†é’¥åå•†ã€‚</li><li><strong>decipherOnly</strong>: ä»…å…è®¸ä½¿ç”¨è¯¥å…¬é’¥è¿›è¡Œè§£å¯†æ“ä½œï¼Œé€šå¸¸ç”¨äºå¯†é’¥åå•†ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>keyUsage</span> <span class=o>=</span> critical, digitalSignature, keyEncipherment
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 Key Usage: critical
</span></span><span class=line><span class=cl>        Digital Signature, Key Encipherment
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Extended Key Usage (EKU): è¿›ä¸€æ­¥å®šä¹‰è¯ä¹¦ä¸­å…¬é’¥çš„ç‰¹å®šç”¨é€”</summary><ul><li><strong>serverAuth</strong>: å…è®¸è¯ä¹¦ç”¨äºæœåŠ¡å™¨èº«ä»½éªŒè¯ï¼Œé€šå¸¸ç”¨äº SSL/TLS æœåŠ¡å™¨è¯ä¹¦ã€‚(å¸¸ç”¨</li><li><strong>clientAuth</strong>: å…è®¸è¯ä¹¦ç”¨äºå®¢æˆ·ç«¯èº«ä»½éªŒè¯ï¼Œé€šå¸¸ç”¨äº SSL/TLS å®¢æˆ·ç«¯è¯ä¹¦ã€‚(å¸¸ç”¨</li><li><strong>codeSigning</strong>: å…è®¸è¯ä¹¦ç”¨äºä»£ç ç­¾åï¼Œç¡®ä¿è½¯ä»¶çš„å®Œæ•´æ€§å’Œæ¥æºã€‚</li><li><strong>emailProtection</strong>: å…è®¸è¯ä¹¦ç”¨äºç”µå­é‚®ä»¶ä¿æŠ¤ï¼Œé€šå¸¸ç”¨äº S/MIME ç”µå­é‚®ä»¶åŠ å¯†å’Œç­¾åã€‚</li><li><strong>timeStamping</strong>: å…è®¸è¯ä¹¦ç”¨äºæ—¶é—´æˆ³æœåŠ¡ï¼Œç¡®ä¿æ•°æ®åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å­˜åœ¨æ€§ã€‚</li><li><strong>OCSPSigning</strong>: å…è®¸è¯ä¹¦ç”¨äºåœ¨çº¿è¯ä¹¦çŠ¶æ€åè®® (OCSP) ç­¾åï¼Œé€šå¸¸ç”¨äºè¯ä¹¦çŠ¶æ€æ£€æŸ¥ã€‚</li><li><strong>ipsecEndSystem</strong>: å…è®¸è¯ä¹¦ç”¨äº IPsec ç»ˆç«¯ç³»ç»Ÿã€‚</li><li><strong>ipsecTunnel</strong>: å…è®¸è¯ä¹¦ç”¨äº IPsec éš§é“ã€‚</li><li><strong>ipsecUser</strong>: å…è®¸è¯ä¹¦ç”¨äº IPsec ç”¨æˆ·ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>extendedKeyUsage</span> <span class=o>=</span> serverAuth, clientAuth
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 Extended Key Usage: 
</span></span><span class=line><span class=cl>TLS Web Server Authentication, TLS Web Client Authentication
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Subject Alternative Name (SAN): ç”¨äºæŒ‡å®šè¯ä¹¦çš„æ›¿ä»£ä¸»é¢˜åç§°ï¼Œè¿™äº›åç§°å¯ä»¥æ˜¯ DNS åç§°ã€IP åœ°å€ã€ç”µå­é‚®ä»¶åœ°å€ç­‰ï¼Œè¿™ä½¿å¾—è¯ä¹¦å¯ä»¥æ”¯æŒå¤šä¸ªåŸŸåæˆ–å…¶ä»–æ ‡è¯†ç¬¦ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªåç§°å•ç‹¬ç”Ÿæˆè¯ä¹¦</summary><ul><li>å¤šåŸŸåæ”¯æŒ: SAN å…è®¸ä¸€ä¸ªè¯ä¹¦åŒæ—¶æ”¯æŒå¤šä¸ªåŸŸåã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª SSL/TLS è¯ä¹¦å¯ä»¥åŒæ—¶ä¿æŠ¤ <a class=link href=https://www.example.com target=_blank rel=noopener>www.example.com</a> å’Œ example.netã€‚</li><li>IP åœ°å€: SAN å¯ä»¥åŒ…å« IP åœ°å€ï¼Œå…è®¸è¯ä¹¦ç”¨äºç‰¹å®šçš„ IP åœ°å€ã€‚</li><li>ç”µå­é‚®ä»¶åœ°å€: SAN ä¹Ÿå¯ä»¥åŒ…å«ç”µå­é‚®ä»¶åœ°å€ï¼Œé€‚ç”¨äº S/MIME è¯ä¹¦ã€‚</li><li>å…¶ä»–åç§°: SAN è¿˜å¯ä»¥åŒ…å«å…¶ä»–ç±»å‹çš„åç§°ï¼Œä¾‹å¦‚ URI æˆ–å…¶ä»–è‡ªå®šä¹‰æ ‡è¯†ç¬¦ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>subjectAltName</span> <span class=o>=</span> DNS:www.example.com, DNS:example.com, IP:192.168.1.1, email:info@example.com
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 Subject Alternative Name: 
</span></span><span class=line><span class=cl>DNS:www.example.com, DNS:example.com, IP Address:192.168.1.1, email:info@example.com
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Authority Key Identifier (AKI): ç”¨äºå¸®åŠ©è¯†åˆ«ç­¾å‘è¯¥è¯ä¹¦çš„è¯ä¹¦é¢å‘æœºæ„ (CA) çš„å…¬é’¥ï¼Œæ˜¯ç­¾å‘è¯¥è¯ä¹¦ CA çš„å…¬é’¥å“ˆå¸Œå€¼</summary><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span><span class=o>=</span>keyid,issuer
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 Authority Key Identifier: 
</span></span><span class=line><span class=cl>keyid:CD:EE:95:A0:85:70:4B:59:6D:99:CA:6D:BE:7D:EB:FB:88:7B:64:35
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Subject Key Identifier (SKI): æ˜¯å½“å‰è¯ä¹¦çš„å…¬é’¥å“ˆå¸Œå€¼ï¼Œå¦‚æœä½¿ç”¨è¯¥è¯ä¹¦ï¼ˆCAï¼‰ç­¾å‘å…¶ä»–çš„è¯ä¹¦ï¼Œåˆ™å­è¯ä¹¦çš„ AKI å¯¹åº”æœ¬è¯ä¹¦çš„ SKI</summary><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>subjectKeyIdentifier</span> <span class=o>=</span> <span class=nb>hash</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 Subject Key Identifier: 
</span></span><span class=line><span class=cl>B9:AE:C9:13:AD:A7:C4:E4:51:A5:56:18:5C:2B:F6:E4:1E:95:C6:AB
</span></span></code></pre></td></tr></table></div></div></details><details><summary>CRL Distribution Points (CRL DP): ç”¨äºæŒ‡ç¤ºè¯ä¹¦æ’¤é”€åˆ—è¡¨ (CRL) çš„åˆ†å‘ä½ç½®</summary><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>crlDistributionPoints</span> <span class=o>=</span> URI:http://crl.example.com/crl.pem
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 CRL Distribution Points: 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Full Name:
</span></span><span class=line><span class=cl>    URI:http://crl.example.com/crl.pem
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Certificate Policies: ä½¿ç”¨é€—å·åˆ†éš”çš„æ ¼å¼æ¥å®šä¹‰å¤šä¸ªæ”¿ç­–ã€‚æ¯ä¸ªæ”¿ç­–ç”± OID å’Œç›¸åº”çš„é™å®šç¬¦</summary><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>certificatePolicies</span> <span class=o>=</span> 1.3.6.1.4.1.12345.1.1.1, 1.2.3.4.5.6.7.8.9.1
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>X509v3 Certificate Policies: 
</span></span><span class=line><span class=cl>Policy: 1.3.6.1.4.1.12345.1.1.1
</span></span><span class=line><span class=cl>Policy: 1.2.3.4.5.6.7.8.9.1
</span></span></code></pre></td></tr></table></div></div></details><details><summary>Authority Information Access (AIA): ç”¨äºæä¾›æœ‰å…³å¦‚ä½•è®¿é—®è¯ä¹¦é¢å‘æœºæ„ (CA) çš„ä¿¡æ¯ï¼Œé€šå¸¸åŒ…å«æŒ‡å‘ CA è¯ä¹¦å’Œåœ¨çº¿è¯ä¹¦çŠ¶æ€åè®® (OCSP) æœåŠ¡å™¨çš„ URL</summary><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>authorityInfoAccess</span> <span class=o>=</span> OCSP<span class=p>;</span>URI:http://ocsp.example.com/, caIssuers<span class=p>;</span>URI:http://myca.example.com/ca.cer
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Authority Information Access: 
</span></span><span class=line><span class=cl>OCSP - URI:http://ocsp.example.com/
</span></span><span class=line><span class=cl>CA Issuers - URI:http://myca.example.com/ca.cer
</span></span></code></pre></td></tr></table></div></div></details><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆæ ¹è¯ä¹¦å’Œå¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout rootCA.key -out rootCA.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=Root CA&#34;</span> -newkey rsa:2048
</span></span><span class=line><span class=cl><span class=c1># ç”ŸæˆæœåŠ¡å™¨å¯†é’¥å’Œ CSRï¼š</span>
</span></span><span class=line><span class=cl>openssl genrsa -out server.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -new -key server.key -out server.csr -subj <span class=s2>&#34;/CN=Server&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºæ‰©å±•é…ç½®æ–‡ä»¶ï¼š</span>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ v3.extï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š</span>
</span></span><span class=line><span class=cl><span class=nv>authorityKeyIdentifier</span><span class=o>=</span>keyid,issuer
</span></span><span class=line><span class=cl><span class=nv>basicConstraints</span><span class=o>=</span>CA:FALSE
</span></span><span class=line><span class=cl><span class=nv>keyUsage</span><span class=o>=</span>digitalSignature, keyEncipherment
</span></span><span class=line><span class=cl><span class=nv>extendedKeyUsage</span><span class=o>=</span>serverAuth
</span></span><span class=line><span class=cl><span class=nv>subjectAltName</span><span class=o>=</span>DNS:example.com, DNS:www.example.com, IP:192.168.1.1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨æ ¹è¯ä¹¦ç­¾ç½²æœåŠ¡å™¨è¯ä¹¦ï¼š</span>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ -extfile å’Œ -extensions å‚æ•°æŒ‡å®šæ‰©å±•é…ç½®æ–‡ä»¶ï¼š</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days <span class=m>365</span> -extfile v3.ext
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ç”Ÿæˆçš„è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -in server.crt -noout -text
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯è¯ä¹¦é“¾</span>
</span></span><span class=line><span class=cl>openssl verify -CAfile rootCA.pem server.crt
</span></span></code></pre></td></tr></table></div></div><h2 id=pkcs-è¯ä¹¦æ ¼å¼è½¬æ¢>PKCS è¯ä¹¦æ ¼å¼è½¬æ¢</h2><p>PKCSï¼ˆPublic Key Cryptography Standardsï¼‰æ˜¯ç”± RSA å®éªŒå®¤åˆ¶å®šçš„ä¸€ç³»åˆ—æ ‡å‡†ï¼Œä¸»è¦ç”¨äºå…¬é’¥å¯†ç å­¦ã€‚PKCS çš„ä¸åŒç‰ˆæœ¬å’Œç¼–å·ä»£è¡¨äº†ä¸åŒçš„æ ‡å‡†å’Œè§„èŒƒã€‚</p><p>å¯¼å‡ºä¸åŒæ ¼å¼è¯ä¹¦</p><ul><li><code>PKCS#1</code>ï¼šä»…åŒ…å«ç§é’¥ä¿¡æ¯ï¼Œä¸åŒ…å«è¯ä¹¦é“¾ä¿¡æ¯ã€‚ä¸»è¦å­˜å‚¨ RSA å…¬é’¥å’Œç§é’¥ï¼ˆå…¬é’¥å¯ä»ç§é’¥ä¸­æå–</li><li><code>PKCS#8</code> ï¼šå­˜å‚¨ç§é’¥ï¼Œä¸ä»…é™äº RSAï¼ˆDSAã€ECDSAã€RSAç­‰ï¼Œå¸¸ç”¨äºå¤šç±»å‹ç§é’¥å¸¸è§ï¼šJava KeyStoreã€OpenSSL ç­‰ï¼Œæ¯” <code>PKCS#1</code> æ›´é€šç”¨ï¼›ç§é’¥é¦–å…ˆä¼šä½¿ç”¨
<code>PKCS#5</code> çš„æ ‡å‡†è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå°†å…¶è¿›è¡Œ base64 ç¼–ç ï¼Œè½¬æ¢æˆä¸º <code>PEM</code> æ ¼å¼è¿›è¡Œå­˜å‚¨</li><li><code>PKCS#7</code>ï¼šåŒ…å«è¯ä¹¦é“¾ä¿¡æ¯ï¼Œä½†ä¸åŒ…å«ç§é’¥ä¿¡æ¯ã€‚<ul><li>æ–‡ä»¶æ ¼å¼ä¸€èˆ¬ä¸º <code>.p7b</code></li></ul></li><li><code>PKCS#12</code>ï¼šå¯ä»¥å­˜å‚¨è¯ä¹¦ï¼Œç§é’¥æˆ–è€… CRLã€‚å’Œ <code>PKCS#7</code> ç›¸æ¯”ï¼Œ<code>PKCS#12</code> å¯ä»¥é¢å¤–å­˜å‚¨ç§é’¥ã€‚<ul><li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ<code>PKCS#12</code> æ ¼å¼çš„è¯ä¹¦é€šå¸¸ç”¨äºå¯¼å…¥åˆ°æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ï¼Œè€Œ <code>PKCS#1</code> å’Œ <code>PKCS#7</code>
æ ¼å¼çš„è¯ä¹¦åˆ™é€šå¸¸ç”¨äºæœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºæˆ–å…¶ä»–ç‰¹å®šåœºæ™¯ã€‚</li><li>PKCS12çš„æ–‡ä»¶æ˜¯ä»¥ <code>.p12</code> æˆ–è€… <code>.pfx</code> ç»“å°¾çš„</li></ul></li><li><code>PKCS#10</code> ï¼šå®šä¹‰è¯ä¹¦è¯·æ±‚æ ¼å¼ï¼Œç”¨äºç”³è¯·æ•°å­—è¯ä¹¦ï¼Œå³ CSR (Certificate Signing Request) æ–‡ä»¶</li></ul><h3 id=pkcs1-pkcs8-pkcs10-x509-è¯ä¹¦ç›¸å…³>PKCS#1, PKCS#8, PKCS#10, x509 è¯ä¹¦ç›¸å…³</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆ 2048 ä½ RSA ç§é’¥ï¼Œè¾“å‡ºåˆ° private_key.pem æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=c1># genrsa å‘½ä»¤ç”¨äºç”Ÿæˆç¬¦åˆ PKCS#1 æ ‡å‡†çš„ RSA ç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genrsa -out private_key.pem <span class=m>2048</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ -pubout å‚æ•°ä»ç§é’¥ä¸­å¯¼å‡ºå…¬é’¥</span>
</span></span><span class=line><span class=cl>openssl rsa -in private_key.pem -pubout -out public_key.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚</span>
</span></span><span class=line><span class=cl><span class=c1># PKCS#10 å®šä¹‰äº†è¯ä¹¦è¯·æ±‚æ ¼å¼ã€‚-subj å‚æ•°æŒ‡å®šè¯ä¹¦ä¸»é¢˜ä¿¡æ¯ï¼Œä¾‹å¦‚å›½å®¶ (C)ã€å· (ST)ã€ç»„ç»‡ (O) ç­‰</span>
</span></span><span class=line><span class=cl>openssl req -new -key private_key.pem -out csr.pem -subj <span class=s2>&#34;/C=CN/ST=Beijing/L=Beijing/O=MyCompany/OU=IT Department/CN=example.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”¨ç§é’¥å’Œè¯ä¹¦è¯·æ±‚ç”Ÿæˆ x509 è‡ªç­¾åè¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in csr.pem -signkey private_key.pem -out certificate.pem -days <span class=m>365</span>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹è¯ä¹¦å†…å®¹</span>
</span></span><span class=line><span class=cl>openssl x509 -in certificate.pem -text -noout
</span></span></code></pre></td></tr></table></div></div><h3 id=pkcs1-å’Œ-pkcs8-äº’è½¬>PKCS#1 å’Œ PKCS#8 äº’è½¬</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆ PKCS#1 æ ¼å¼çš„ RSA ç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genrsa -out rsa_pkcs1.key <span class=m>2048</span>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯æ–‡ä»¶æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl rsa -in rsa_pkcs1.key -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>===========</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°† PKCS#1 ç§é’¥è½¬æ¢ä¸º PKCS#8 æ ¼å¼ï¼ˆéåŠ å¯†ï¼‰</span>
</span></span><span class=line><span class=cl>openssl pkcs8 -topk8 -inform PEM -in rsa_pkcs1.key -outform PEM -nocrypt -out rsa_pkcs8.key
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯æ–‡ä»¶æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl pkey -in rsa_pkcs8.key -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°† PKCS#1 ç§é’¥è½¬æ¢ä¸º PKCS#8 æ ¼å¼ï¼ˆåŠ å¯†ï¼‰</span>
</span></span><span class=line><span class=cl><span class=c1># -passout, æŒ‡å®šåŠ å¯†å¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl pkcs8 -topk8 -inform PEM -in rsa_pkcs1.key -outform PEM -out rsa_pkcs8_encrypted.key -passout pass:yourpassword
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯åŠ å¯†çš„ PKCS#8 æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl pkey -in rsa_pkcs8_encrypted.key -text -noout -passin pass:yourpassword
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°† PKCS#8 ç§é’¥è¿˜åŸä¸º PKCS#1 æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl rsa -in rsa_pkcs8.key -out rsa_pkcs1_restored.key
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯è¿˜åŸåçš„æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl rsa -in rsa_pkcs1_restored.key -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>===========</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## éªŒè¯ç§é’¥ç”Ÿæˆçš„å…¬é’¥</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æå–å…¬é’¥ï¼ˆä» PKCS#1 ç§é’¥ï¼‰</span>
</span></span><span class=line><span class=cl>openssl rsa -in rsa_pkcs1.key -pubout -out public_key_from_pkcs1.pem
</span></span><span class=line><span class=cl><span class=c1># æå–å…¬é’¥ï¼ˆä» PKCS#8 ç§é’¥ï¼‰</span>
</span></span><span class=line><span class=cl>openssl pkey -in rsa_pkcs8.key -pubout -out public_key_from_pkcs8.pem
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯å…¬é’¥æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl rsa -pubin -in public_key_from_pkcs1.pem -text -noout
</span></span><span class=line><span class=cl>openssl rsa -pubin -in public_key_from_pkcs8.pem -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## ç­¾åå’ŒéªŒè¯æµ‹è¯•</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#1 ç§é’¥ç­¾å</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Test message&#34;</span> &gt; test_message.txt
</span></span><span class=line><span class=cl>openssl dgst -sha256 -sign rsa_pkcs1.key -out signature.bin test_message.txt
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#1 å…¬é’¥éªŒè¯ç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -verify public_key_from_pkcs1.pem -signature signature.bin test_message.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#8 ç§é’¥ç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -sign rsa_pkcs8.key -out signature_pkcs8.bin test_message.txt
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#8 å…¬é’¥éªŒè¯ç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -verify public_key_from_pkcs8.pem -signature signature_pkcs8.bin test_message.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## åŠ å¯†å’Œè§£å¯†éªŒè¯æµ‹è¯•</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#1 å…¬é’¥åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl rsautl -encrypt -inkey public_key_from_pkcs1.pem -pubin -in test_message.txt -out encrypted_message_pkcs1.bin
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#1 ç§é’¥è§£å¯†</span>
</span></span><span class=line><span class=cl>openssl rsautl -decrypt -inkey rsa_pkcs1.key -in encrypted_message_pkcs1.bin -out decrypted_message_pkcs1.txt
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ PKCS#1 è§£å¯†ç»“æœ</span>
</span></span><span class=line><span class=cl>diff test_message.txt decrypted_message_pkcs1.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#8 å…¬é’¥åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl rsautl -encrypt -inkey public_key_from_pkcs8.pem -pubin -in test_message.txt -out encrypted_message_pkcs8.bin
</span></span><span class=line><span class=cl><span class=c1># ç”¨ PKCS#8 ç§é’¥è§£å¯†</span>
</span></span><span class=line><span class=cl>openssl rsautl -decrypt -inkey rsa_pkcs8.key -in encrypted_message_pkcs8.bin -out decrypted_message_pkcs8.txt
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ PKCS#8 è§£å¯†ç»“æœ</span>
</span></span><span class=line><span class=cl>diff test_message.txt decrypted_message_pkcs8.txt
</span></span></code></pre></td></tr></table></div></div><h3 id=pkcs7-è¯ä¹¦é“¾ç›¸å…³>PKCS#7 è¯ä¹¦é“¾ç›¸å…³</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆæ ¹è¯ä¹¦å’Œç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genrsa -out rootCA.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -key rootCA.key -out rootCA.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=Root CA&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆä¸­é—´è¯ä¹¦å’Œç§é’¥</span>
</span></span><span class=line><span class=cl>openssl genrsa -out intermediateCA.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -new -key intermediateCA.key -out intermediateCA.csr -subj <span class=s2>&#34;/CN=Intermediate CA&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ csr</span>
</span></span><span class=line><span class=cl>openssl req -in intermediateCA.csr -noout -text
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨æ ¹è¯ä¹¦ç­¾ç½²ä¸­é—´è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in intermediateCA.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out intermediateCA.pem -days <span class=m>365</span>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯è¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl x509 -in intermediateCA.pem -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆè¯ä¹¦é“¾</span>
</span></span><span class=line><span class=cl>cat intermediateCA.pem rootCA.pem &gt; cert_chain.pem
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯è¯ä¹¦é“¾</span>
</span></span><span class=line><span class=cl>openssl verify -CAfile rootCA.pem intermediateCA.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨è¯ä¹¦åˆ›å»º PKCS#7</span>
</span></span><span class=line><span class=cl><span class=c1># crl2pkcs7 ç”¨äºç”Ÿæˆ PKCS#7 æ ¼å¼çš„è¯ä¹¦é“¾ï¼Œ-nocrl è¡¨ç¤ºä¸åŒ…æ‹¬è¯ä¹¦åŠé”€åˆ—è¡¨ (CRL)</span>
</span></span><span class=line><span class=cl>openssl crl2pkcs7 -certfile cert_chain.pem -out cert_chain.p7b -nocrl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ PKCS#7 æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl pkcs7 -print -in cert_chain.p7b
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°† PKCS#7 é‡Œçš„è¯ä¹¦é“¾æå–å‡ºæ¥</span>
</span></span><span class=line><span class=cl>openssl pkcs7 -in cert_chain.p7b -print_certs -out extracted_certs.pem
</span></span></code></pre></td></tr></table></div></div><h3 id=pkcs12-ç›¸å…³>PKCS#12 ç›¸å…³</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆè‡ªç­¾åæ ¹è¯ä¹¦å’Œç§é’¥</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -nodes -keyout rootCA.key -out rootCA.pem -days <span class=m>365</span> -subj <span class=s2>&#34;/CN=Root CA&#34;</span> -newkey rsa:2048
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ ¹è¯ä¹¦ç­¾å‘ä¸­é—´ CA è¯ä¹¦ 1</span>
</span></span><span class=line><span class=cl>openssl genrsa -out intermediateCA1.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -new -key intermediateCA1.key -out intermediateCA1.csr -subj <span class=s2>&#34;/CN=Intermediate CA 1&#34;</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in intermediateCA1.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out intermediateCA1.pem -days <span class=m>365</span>
</span></span><span class=line><span class=cl>openssl x509 -in intermediateCA1.pem -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¸­é—´ CA 1 è¯ä¹¦ç­¾å‘ä¸­é—´ CA è¯ä¹¦ 2</span>
</span></span><span class=line><span class=cl>openssl genrsa -out intermediateCA2.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>openssl req -new -key intermediateCA2.key -out intermediateCA2.csr -subj <span class=s2>&#34;/CN=Intermediate CA 2&#34;</span>
</span></span><span class=line><span class=cl>openssl x509 -req -in intermediateCA2.csr -CA intermediateCA1.pem -CAkey intermediateCA1.key -CAcreateserial -out intermediateCA2.pem -days <span class=m>365</span>
</span></span><span class=line><span class=cl>openssl x509 -in intermediateCA2.pem -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºå®Œæ•´çš„è¯ä¹¦é“¾</span>
</span></span><span class=line><span class=cl>cat intermediateCA2.pem intermediateCA1.pem rootCA.pem &gt; chain.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆ PKCS#12 æ–‡ä»¶</span>
</span></span><span class=line><span class=cl><span class=c1># -inkey æŒ‡å®šæœåŠ¡å™¨ç§é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -certfile æŒ‡å®šè¯ä¹¦é“¾</span>
</span></span><span class=line><span class=cl><span class=c1># -in æŒ‡å®šæœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=c1># -name æŒ‡å®šè¯ä¹¦çš„åç§°</span>
</span></span><span class=line><span class=cl><span class=c1># -password å¯¹ p12 åŠ å¯†å¯†é’¥; å¯†ç æ–‡ä»¶: file:password.txt; æ˜æ–‡å¯†ç : pass:yourpassword; stdin æ ‡å‡†è¾“å…¥å½•å…¥å¯†ç </span>
</span></span><span class=line><span class=cl>openssl pkcs12 -export -out server.p12 -inkey server.key -in server.crt -certfile chain.pem -name <span class=s2>&#34;ServerCert&#34;</span> -password pass:yourpassword
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¯¼å‡ºè¯ä¹¦å’Œç§é’¥çš„ PEM æ ¼å¼ï¼Œè¯¥ server.pem å¯ä»¥è¢«å®‰è£…åˆ°æœåŠ¡å™¨ä¸­</span>
</span></span><span class=line><span class=cl><span class=c1># -nodes è¡¨ç¤ºå¯¼å‡ºçš„ PEM ä¸åŠ å¯†ç ï¼Œé‡Œé¢åŒ…å«å¯†é’¥ï¼Œå› æ­¤æ¨èåŠ å¯†ç </span>
</span></span><span class=line><span class=cl>openssl pkcs12 -in server.p12 -out server.pem -nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># p12 æå–ç§é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -password æ˜¯p12 æ–‡ä»¶çš„åŠ å¯†çš„å¯†ç </span>
</span></span><span class=line><span class=cl><span class=c1># -nodes å¯¹å¯¼å‡ºçš„å¯†é’¥æ–‡ä»¶ä¸åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl pkcs12 -in server.p12 -nocerts -out extracted_key.pem -password pass:yourpassword -nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># p12 æå–è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=c1># -clcerts æå–æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=c1># -nokeys ä¸åŒ…å«ç§é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># -password æ˜¯p12 æ–‡ä»¶çš„åŠ å¯†çš„å¯†ç </span>
</span></span><span class=line><span class=cl>openssl pkcs12 -in server.p12 -clcerts -nokeys -out extracted_cert.pem -password pass:yourpassword
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># p12 æå–å®Œæ•´è¯ä¹¦é“¾ï¼ˆä¸åŒ…å«æœåŠ¡å™¨è¯ä¹¦ï¼‰</span>
</span></span><span class=line><span class=cl><span class=c1># -cacerts æå–è¯ä¹¦é“¾ï¼Œä¸åŒ…å«ç§é’¥å’ŒæœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span class=line><span class=cl><span class=c1># -password æ˜¯p12 æ–‡ä»¶çš„åŠ å¯†çš„å¯†ç </span>
</span></span><span class=line><span class=cl>openssl pkcs12 -in server.p12 -cacerts -nokeys -out extracted_chain.pem -password pass:yourpassword
</span></span></code></pre></td></tr></table></div></div><h1 id=ecc>ECC</h1><p>æ¤­åœ†æ›²çº¿å¯†ç å­¦ï¼ˆElliptic Curve Cryptographyï¼ŒECCï¼‰</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å¯ç”¨çš„æ¤­åœ†æ›²çº¿å‚æ•°</span>
</span></span><span class=line><span class=cl>openssl ecparam -list_curves
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”Ÿæˆ ECC ç§é’¥ï¼Œ-name é€‰æ‹©æ¤­åœ†æ›²çº¿å‚æ•°</span>
</span></span><span class=line><span class=cl>openssl ecparam -genkey -name prime256v1 -out ec_private_key.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># éªŒè¯ ECC ç§é’¥è¯¦ç»†ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>openssl ec -in ec_private_key.pem -text -noout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹æ¤­åœ†æ›²çº¿è¯¦ç»†å‚æ•°</span>
</span></span><span class=line><span class=cl>openssl ecparam -name prime256v1 -text -param_enc explicit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ ¹æ® ECC ç§é’¥è·å–å…¬é’¥ï¼Œ-name ä¿æŒä¸€è‡´</span>
</span></span><span class=line><span class=cl>openssl ecparam -name prime256v1 -in ec_private_key.pem -out ec_public_key.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å…¬é’¥å†…å®¹</span>
</span></span><span class=line><span class=cl>openssl ec -pubin -in ec_public_key.pem -text -noout
</span></span></code></pre></td></tr></table></div></div><h2 id=ecc-è½¬æ¢æ ¼å¼>ECC è½¬æ¢æ ¼å¼</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ECC ç§é’¥ä» PEM è½¬ä¸º DER æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl ec -in ec_private_key.pem -outform DER -out ec_private_key.der
</span></span><span class=line><span class=cl><span class=c1># ECC å…¬é’¥ä» PEM è½¬ä¸º DER æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl ec -pubin -in ec_public_key.pem -outform DER -out ec_public_key.der
</span></span><span class=line><span class=cl><span class=c1># ECC ç§é’¥ä» DER è½¬ä¸º PEM æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl ec -inform DER -in ec_private_key.der -out ec_private_key.pem
</span></span><span class=line><span class=cl><span class=c1># ECC å…¬é’¥ä» DER è½¬ä¸º PEM æ ¼å¼</span>
</span></span><span class=line><span class=cl>openssl ec -pubin -inform DER -in ec_public_key.der -out ec_public_key.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=ecdsa-ç­¾åä¸éªŒç­¾>ECDSA ç­¾åä¸éªŒç­¾</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello&#34;</span> &gt; plaintext.txt
</span></span><span class=line><span class=cl><span class=c1># å¯¹æ–‡ä»¶è¿›è¡Œ SHA256 ç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -sign ec_private_key.pem -out signature.bin plaintext.txt
</span></span><span class=line><span class=cl><span class=c1># å…¬é’¥éªŒè¯ç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -verify ec_public_key.pem -signature signature.bin plaintext.txt
</span></span></code></pre></td></tr></table></div></div><h2 id=ecdh-éå¯¹ç§°åŠ å¯†>ECDH éå¯¹ç§°åŠ å¯†</h2><p>Alice å’Œ Bob è¿›è¡Œéå¯¹ç§°åŠ å¯†ï¼Œæµç¨‹ä¸ HTTPS æ¡æ‰‹ç›¸ä¼¼ï¼ŒECDH ä¸åƒ RSA å¯ä»¥ç›´æ¥å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼Œè€Œæ˜¯ä½¿ç”¨å¯¹æ–¹çš„å…¬é’¥ï¼Œé…åˆè‡ªå·±çš„ç§é’¥ç”Ÿæˆå…±äº«å¯†é’¥ï¼ŒåŠ è§£å¯†ä½¿ç”¨å…±äº«å¯†é’¥åšå¯¹ç§°åŠ å¯†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Alice ç”Ÿæˆè‡ªå·±çš„å¯†é’¥å¯¹</span>
</span></span><span class=line><span class=cl>openssl ecparam -genkey -name prime256v1 -out alice_private.pem
</span></span><span class=line><span class=cl>openssl ec -in alice_private.pem -pubout -out alice_public.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bob ç”Ÿæˆè‡ªå·±çš„å¯†é’¥å¯¹</span>
</span></span><span class=line><span class=cl>openssl ecparam -genkey -name prime256v1 -out bob_private.pem
</span></span><span class=line><span class=cl>openssl ec -in bob_private.pem -pubout -out bob_public.pem
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Alice ç”Ÿæˆå…±äº«å¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl pkeyutl -derive -inkey alice_private.pem -peerkey bob_public.pem -out shared_key.bin
</span></span><span class=line><span class=cl><span class=c1># Bob ç”Ÿæˆå…±äº«å¯†é’¥</span>
</span></span><span class=line><span class=cl>openssl pkeyutl -derive -inkey bob_private.pem -peerkey alice_public.pem -out shared_key.bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello&#34;</span> &gt; plaintext.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Alice ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>openssl enc -aes-256-cbc -salt -in plaintext.txt -out encrypted.txt -pass file:shared_key.bin
</span></span><span class=line><span class=cl><span class=c1># Alice ä½¿ç”¨ç§é’¥å¯¹åŠ å¯†æ–‡ä»¶è¿›è¡Œç­¾å</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -sign alice_private.pem -out signature.bin encrypted.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bob ä½¿ç”¨å…±äº«å¯†é’¥è§£å¯†</span>
</span></span><span class=line><span class=cl>openssl enc -d -aes-256-cbc -in encrypted.txt -out decrypted.txt -pass file:shared_key.bin
</span></span><span class=line><span class=cl><span class=c1># Bob ä½¿ç”¨å…¬é’¥éªŒç­¾</span>
</span></span><span class=line><span class=cl>openssl dgst -sha256 -verify alice_public.pem -signature signature.bin encrypted.txt
</span></span></code></pre></td></tr></table></div></div><h2 id=ç”Ÿæˆè‡ªç­¾å-ecc-è¯ä¹¦>ç”Ÿæˆè‡ªç­¾å ECC è¯ä¹¦</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ä½¿ç”¨ ECC ç§é’¥ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</span>
</span></span><span class=line><span class=cl>openssl req -x509 -new -key ec_private_key.pem -out ec_cert.pem <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -subj <span class=s2>&#34;/C=CN/ST=Beijing/L=Beijing/O=MyOrg/OU=IT/CN=example.com&#34;</span> -days <span class=m>365</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹è¯ä¹¦çš„è¯¦ç»†ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>openssl x509 -in ec_cert.pem -text -noout
</span></span></code></pre></td></tr></table></div></div><h1 id=aes>AES</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello&#34;</span> &gt; plaintext.txt
</span></span><span class=line><span class=cl>openssl rand <span class=m>16</span> -out key.bin
</span></span><span class=line><span class=cl>openssl rand <span class=m>16</span> -out iv.bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># AES-128-CBC åŠ è§£å¯†</span>
</span></span><span class=line><span class=cl><span class=c1># -K æŒ‡å®šå¯†é’¥ï¼ˆåå…­è¿›åˆ¶ï¼‰</span>
</span></span><span class=line><span class=cl><span class=c1># -iv æŒ‡å®šåˆå§‹å‘é‡ï¼ˆåå…­è¿›åˆ¶ï¼‰ï¼Œä¸€èˆ¬ä¸º 16 å­—èŠ‚</span>
</span></span><span class=line><span class=cl><span class=c1># -K å’Œ -iv å¿…é¡»ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸º -K ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆ iv</span>
</span></span><span class=line><span class=cl>openssl enc -aes-128-cbc -in plaintext.txt -out encrypted.bin -K <span class=k>$(</span>xxd -p key.bin<span class=k>)</span> -iv <span class=k>$(</span>xxd -p iv.bin<span class=k>)</span>
</span></span><span class=line><span class=cl>openssl enc -d -aes-128-cbc -in encrypted.bin -out decrypted.txt -K <span class=k>$(</span>xxd -p key.bin<span class=k>)</span> -iv <span class=k>$(</span>xxd -p iv.bin<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¯ä»¥ç”¨ -pass file: æŒ‡å®šæ–‡ä»¶ä½œä¸ºå¯†é’¥</span>
</span></span><span class=line><span class=cl><span class=c1># å¦‚æœä½¿ç”¨ -pass æ›¿ä»£ -K å¯ä»¥ä¸éœ€è¦ -ivï¼Œ-pass ä¼šè‡ªåŠ¨ç”Ÿæˆ ivï¼Œå¹¶æ·»åŠ åˆ° padding å¤´éƒ¨</span>
</span></span><span class=line><span class=cl><span class=c1># -pass å¯ä»¥åŠ  -pass stdinï¼Œä¸ä½¿ç”¨æ–‡ä»¶å¯†é’¥ï¼Œå¯ä»¥ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–</span>
</span></span><span class=line><span class=cl>openssl enc -aes-128-cbc -in plaintext.txt -out encrypted.bin -pass file:key.bin
</span></span><span class=line><span class=cl>openssl enc -d -aes-128-cbc -in encrypted.bin -out decrypted.txt -pass file:key.bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -pbkdf2ï¼šä½¿ç”¨ PBKDF2 è¿›è¡Œå¯†é’¥æ´¾ç”Ÿï¼Œopenssl 3 ç‰ˆæœ¬é»˜è®¤éƒ½æ¨èæ·»åŠ </span>
</span></span><span class=line><span class=cl><span class=c1># æˆ–è€…ä½¿ç”¨ -iter 100000 æ›¿ä»£ -pbkdf2, è¡¨ç¤ºè¿­ä»£ 100000 æ¬¡ï¼Œè§£å¯†ä¹Ÿéœ€è¦æ·»åŠ </span>
</span></span><span class=line><span class=cl><span class=c1># -p å¯ä»¥æ‰“å°ç›å€¼ saltï¼Œæ´¾ç”Ÿåçš„å¯†é’¥ key å’Œ iv</span>
</span></span><span class=line><span class=cl>openssl enc -aes-128-cbc -in plaintext.txt -out encrypted.bin -pass stdin -pbkdf2 -p
</span></span><span class=line><span class=cl>openssl enc -d -aes-128-cbc -in encrypted.bin -out decrypted.txt -pass stdin -pbkdf2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># AES-256-CBC æ¨¡å¼åŠ å¯†</span>
</span></span><span class=line><span class=cl>openssl enc -aes-256-cbc -salt -in plaintext.txt -out encrypted.bin -pass file:./password.bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è§£å¯†</span>
</span></span><span class=line><span class=cl>openssl enc -aes-256-cbc -d -in encrypted.bin -out decrypted.txt -pass file:./password.bin
</span></span></code></pre></td></tr></table></div></div><h1 id=reference>Reference</h1><ul><li><a class=link href=https://docs.openssl.org/master/man5/x509v3_config/ target=_blank rel=noopener>x509v3_config - OpenSSL Documentation</a></li><li><a class=link href=https://pki-tutorial.readthedocs.io/en/latest/index.html# target=_blank rel=noopener>OpenSSL PKI Tutorial v2.0 â€” OpenSSL PKI Tutorial</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/openssl/>OpenSSL</a>
<a href=/tags/cryptography/>Cryptography</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/https-tls-and-mtls-and-certificate-related/><div class=article-image><img src=/post/https-tls-and-mtls-and-certificate-related/mtls-cover.2316741c16c2e958c17eca69f980ebf9_hu_86b32d1d70acbc8c.png width=250 height=150 loading=lazy alt="Featured image of post HTTPS å•åŒå‘è®¤è¯åŠè¯ä¹¦ç›¸å…³" data-key=HTTPS-TLS-and-mTLS-and-certificate-related data-hash="md5-IxZ0HBbC6VjBfspp+YDr+Q=="></div><div class=article-details><h2 class=article-title>HTTPS å•åŒå‘è®¤è¯åŠè¯ä¹¦ç›¸å…³</h2></div></a></article><article class=has-image><a href=/post/spring-i18n-abstract-encapsulation-practice/><div class=article-image><img src=/post/spring-i18n-abstract-encapsulation-practice/spring-cover.5a91ac3e53be98b30bf3dfe851c8a1de_hu_5c9922c0a04d15f1.png width=250 height=150 loading=lazy alt="Featured image of post Spring i18n æŠ½è±¡å°è£…å®è·µ" data-key=spring-i18n-abstract-encapsulation-practice data-hash="md5-WpGsPlO+mLML89/oUcih3g=="></div><div class=article-details><h2 class=article-title>Spring i18n æŠ½è±¡å°è£…å®è·µ</h2></div></a></article><article class=has-image><a href=/post/thoughts-on-java-lvalues-and-rvalues/><div class=article-image><img src=/post/thoughts-on-java-lvalues-and-rvalues/java-programming-cover.234de2e0b6de9957ec35995fb2be5099_hu_8f5903ded2d555db.png width=250 height=150 loading=lazy alt="Featured image of post Java å·¦å€¼å’Œå³å€¼çš„æ€è€ƒ" data-key=Thoughts-on-Java-lvalues-and-rvalues data-hash="md5-I03i4LbemVfsNZlfsr5QmQ=="></div><div class=article-details><h2 class=article-title>Java å·¦å€¼å’Œå³å€¼çš„æ€è€ƒ</h2></div></a></article><article class=has-image><a href=/post/some-thoughts-on-designing-absolute-method/><div class=article-image><img src=/post/some-thoughts-on-designing-absolute-method/java-programming-cover.234de2e0b6de9957ec35995fb2be5099_hu_8f5903ded2d555db.png width=250 height=150 loading=lazy alt="Featured image of post å…³äºè®¾è®¡ç»å¯¹å€¼ abs() çš„ä¸€äº›æ€è€ƒ" data-key=some-thoughts-on-designing-absolute-method data-hash="md5-I03i4LbemVfsNZlfsr5QmQ=="></div><div class=article-details><h2 class=article-title>å…³äºè®¾è®¡ç»å¯¹å€¼ abs() çš„ä¸€äº›æ€è€ƒ</h2></div></a></article><article class=has-image><a href=/post/java-for_loop_for_each_iterator-efficiency-analysis/><div class=article-image><img src=/post/java-for_loop_for_each_iterator-efficiency-analysis/java-programming-cover.234de2e0b6de9957ec35995fb2be5099_hu_8f5903ded2d555db.png width=250 height=150 loading=lazy alt="Featured image of post Java For-loop For-each Iterator æ•ˆç‡åˆ†æ" data-key=Java-for_loop_for_each_iterator-efficiency-analysis data-hash="md5-I03i4LbemVfsNZlfsr5QmQ=="></div><div class=article-details><h2 class=article-title>Java For-loop For-each Iterator æ•ˆç‡åˆ†æ</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Capriwits's site</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>